!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).firebase=t()}(this,function(){"use strict";const R=function(r){const n=[];let a=0;for(let t=0;t<r.length;t++){let e=r.charCodeAt(t);e<128?n[a++]=e:(e<2048?n[a++]=e>>6|192:(55296==(64512&e)&&t+1<r.length&&56320==(64512&r.charCodeAt(t+1))?(e=65536+((1023&e)<<10)+(1023&r.charCodeAt(++t)),n[a++]=e>>18|240,n[a++]=e>>12&63|128):n[a++]=e>>12|224,n[a++]=e>>6&63|128),n[a++]=63&e|128)}return n},j={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const a=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){var o=n[r],s=r+1<n.length,c=s?n[r+1]:0,l=r+2<n.length,u=l?n[r+2]:0;let e=(15&c)<<2|u>>6,t=63&u;l||(t=64,s||(e=64)),i.push(a[o>>2],a[(3&o)<<4|c>>4],a[e],a[t])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(R(e),t)},decodeString(r,n){if(this.HAS_NATIVE_SUPPORT&&!n)return atob(r);{var a=this.decodeStringToByteArray(r,n);const l=[];let e=0,t=0;for(;e<a.length;){var i,o,s,c=a[e++];c<128?l[t++]=String.fromCharCode(c):191<c&&c<224?(i=a[e++],l[t++]=String.fromCharCode((31&c)<<6|63&i)):239<c&&c<365?(i=((7&c)<<18|(63&a[e++])<<12|(63&a[e++])<<6|63&a[e++])-65536,l[t++]=String.fromCharCode(55296+(i>>10)),l[t++]=String.fromCharCode(56320+(1023&i))):(o=a[e++],s=a[e++],l[t++]=String.fromCharCode((15&c)<<12|(63&o)<<6|63&s))}return l.join("")}},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let e=0;e<t.length;){var a=r[t.charAt(e++)],i=e<t.length?r[t.charAt(e)]:0,o=++e<t.length?r[t.charAt(e)]:64,s=++e<t.length?r[t.charAt(e)]:64;if(++e,null==a||null==i||null==o||null==s)throw new F;if(n.push(a<<2|i>>4),64!==o){const t=i<<4&240|o>>2;if(n.push(t),64!==s){const t=o<<6&192|s;n.push(t)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class F extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}function U(e){return function(e){e=R(e);return j.encodeByteArray(e,!0)}(e).replace(/\./g,"")}const $=()=>function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,V=()=>{if("undefined"!=typeof document){let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}var t=e&&function(e){try{return j.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(e[1]);return t&&JSON.parse(t)}},H=()=>{var e;return null==(e=(()=>{try{return $()||(()=>{var e;if("undefined"!=typeof process&&void 0!==process.env)return e=process.env.__FIREBASE_DEFAULTS__,e?JSON.parse(e):void 0})()||V()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: "+e)}})())?void 0:e.config};class x{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(r){return(e,t)=>{e?this.reject(e):this.resolve(t),"function"==typeof r&&(this.promise.catch(()=>{}),1===r.length?r(e):r(e,t))}}}function z(){try{return"object"==typeof indexedDB}catch(e){return}}function q(){return new Promise((t,r)=>{try{let e=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),e||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{e=!1},a.onerror=()=>{var e;r((null==(e=a.error)?void 0:e.message)||"")}}catch(t){r(t)}})}class a extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,a.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,n.prototype.create)}}class n{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){var n,t=t[0]||{},r=this.service+"/"+e,e=this.errors[e],e=e?(n=t,e.replace(W,(e,t)=>{var r=n[t];return null!=r?String(r):`<${t}?>`})):"Error",e=this.serviceName+`: ${e} (${r}).`;return new a(r,e,t)}}const W=/\{\$([^}]+)}/g;function K(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function o(e,t){if(e===t)return 1;const r=Object.keys(e),n=Object.keys(t);for(const a of r){if(!n.includes(a))return;const r=e[a],i=t[a];if(J(r)&&J(i)){if(!o(r,i))return}else if(r!==i)return}for(const e of n)if(!r.includes(e))return;return 1}function J(e){return null!==e&&"object"==typeof e}class i{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const s="[DEFAULT]";class G{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new x;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&e.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!=(r=null==e?void 0:e.optional)&&r;if(!this.isInitialized(t)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:t})}catch(e){if(r)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if("EAGER"===e.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:s})}catch(e){}for(const[e,r]of this.instancesDeferred.entries()){var t=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:t});r.resolve(e)}catch(e){}}}}clearInstance(e="[DEFAULT]"){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e="[DEFAULT]"){return this.instances.has(e)}getOptions(e="[DEFAULT]"){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(this.name+`(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);var n=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[e,t]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(e)&&t.resolve(n);return n}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),n=null!=(t=this.onInitCallbacks.get(r))?t:new Set;n.add(e),this.onInitCallbacks.set(r,n);t=this.instances.get(r);return t&&e(t,r),()=>{n.delete(e)}}invokeOnInitCallbacks(e,t){var r=this.onInitCallbacks.get(t);if(r)for(const n of r)try{n(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e)===s?void 0:n,options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(e){}var n;return r||null}normalizeInstanceIdentifier(e="[DEFAULT]"){return!this.component||this.component.multipleInstances?e:s}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Y{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with `+this.name);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);var t=new G(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const X=[];var c,Z;(t=c=c||{})[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT";const Q={debug:c.DEBUG,verbose:c.VERBOSE,info:c.INFO,warn:c.WARN,error:c.ERROR,silent:c.SILENT},ee=c.INFO,te={[c.DEBUG]:"log",[c.VERBOSE]:"log",[c.INFO]:"info",[c.WARN]:"warn",[c.ERROR]:"error"},re=(e,t,...r)=>{if(!(t<e.logLevel)){var n=(new Date).toISOString(),a=te[t];if(!a)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[a](`[${n}]  ${e.name}:`,...r)}};class ne{constructor(e){this.name=e,this._logLevel=ee,this._logHandler=re,this._userLogHandler=null,X.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in c))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?Q[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,c.DEBUG,...e),this._logHandler(this,c.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,c.VERBOSE,...e),this._logHandler(this,c.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,c.INFO,...e),this._logHandler(this,c.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,c.WARN,...e),this._logHandler(this,c.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,c.ERROR,...e),this._logHandler(this,c.ERROR,...e)}}let ae,ie;const oe=new WeakMap,se=new WeakMap,ce=new WeakMap,le=new WeakMap,ue=new WeakMap;let pe={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return se.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ce.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return l(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function he(e){return"function"==typeof e?(r=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ie=ie||[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey]).includes(r)?function(...e){return r.apply(de(this),e),l(oe.get(this))}:function(...e){return l(r.apply(de(this),e))}:function(e,...t){t=r.call(de(this),e,...t);return ce.set(t,e.sort?e.sort():[e]),l(t)}:(e instanceof IDBTransaction&&(i=e,se.has(i)||(t=new Promise((e,t)=>{const r=()=>{i.removeEventListener("complete",n),i.removeEventListener("error",a),i.removeEventListener("abort",a)},n=()=>{e(),r()},a=()=>{t(i.error||new DOMException("AbortError","AbortError")),r()};i.addEventListener("complete",n),i.addEventListener("error",a),i.addEventListener("abort",a)}),se.set(i,t))),n=e,(ae=ae||[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]).some(e=>n instanceof e)?new Proxy(e,pe):e);var i,t,r,n}function l(e){if(e instanceof IDBRequest){var i=e;const r=new Promise((e,t)=>{const r=()=>{i.removeEventListener("success",n),i.removeEventListener("error",a)},n=()=>{e(l(i.result)),r()},a=()=>{t(i.error),r()};i.addEventListener("success",n),i.addEventListener("error",a)});return r.then(e=>{e instanceof IDBCursor&&oe.set(e,i)}).catch(()=>{}),ue.set(r,i),r}if(le.has(e))return le.get(e);var t=he(e);return t!==e&&(le.set(e,t),ue.set(t,e)),t}const de=e=>ue.get(e);function fe(e,t,{blocked:r,upgrade:n,blocking:a,terminated:i}={}){const o=indexedDB.open(e,t),s=l(o);return n&&o.addEventListener("upgradeneeded",e=>{n(l(o.result),e.oldVersion,e.newVersion,l(o.transaction),e)}),r&&o.addEventListener("blocked",e=>r(e.oldVersion,e.newVersion,e)),s.then(e=>{i&&e.addEventListener("close",()=>i()),a&&e.addEventListener("versionchange",e=>a(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}const ge=["get","getKey","getAll","getAllKeys","count"],me=["put","add","delete","clear"],be=new Map;function ve(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t){if(be.get(t))return be.get(t);const n=t.replace(/FromIndex$/,""),a=t!==n,i=me.includes(n);return n in(a?IDBIndex:IDBObjectStore).prototype&&(i||ge.includes(n))?(e=async function(e,...t){e=this.transaction(e,i?"readwrite":"readonly");let r=e.store;return a&&(r=r.index(t.shift())),(await Promise.all([r[n](...t),i&&e.done]))[0]},be.set(t,e),e):void 0}}pe={...Z=pe,get:(e,t,r)=>ve(e,t)||Z.get(e,t,r),has:(e,t)=>!!ve(e,t)||Z.has(e,t)};class _e{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{var t;return"VERSION"===(null==(t=e.getComponent())?void 0:t.type)?(t=e.getImmediate()).library+"/"+t.version:null}).filter(e=>e).join(" ")}}const we="@firebase/app",Ee="0.9.23",u=new ne("@firebase/app"),p="[DEFAULT]",ye={"@firebase/app":"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},h=new Map,d=new Map;function Ie(t,r){try{t.container.addComponent(r)}catch(e){u.debug(`Component ${r.name} failed to register with FirebaseApp `+t.name,e)}}function f(e){const t=e.name;if(d.has(t))return u.debug(`There were multiple attempts to register component ${t}.`),!1;d.set(t,e);for(const t of h.values())Ie(t,e);return!0}function g(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}const m=new n("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Se{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new i("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw m.create("app-deleted",{appName:this._name})}}function Te(e,t={}){let r=e;"object"!=typeof t&&(t={name:t});e=Object.assign({name:p,automaticDataCollectionEnabled:!1},t),t=e.name;if("string"!=typeof t||!t)throw m.create("bad-app-name",{appName:String(t)});if(!(r=r||H()))throw m.create("no-options");var n=h.get(t);if(n){if(o(r,n.options)&&o(e,n.config))return n;throw m.create("duplicate-app",{appName:t})}const a=new Y(t);for(const e of d.values())a.addComponent(e);n=new Se(r,e,a);return h.set(t,n),n}async function Ce(e){var t=e.name;h.has(t)&&(h.delete(t),await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)}function e(e,t,r){let n=null!=(a=ye[e])?a:e;r&&(n+="-"+r);var a=n.match(/\s|\//),r=t.match(/\s|\//);if(a||r){const e=[`Unable to register library "${n}" with version "${t}":`];return a&&e.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&r&&e.push("and"),r&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void u.warn(e.join(" "))}f(new i(n+"-version",()=>({library:n,version:t}),"VERSION"))}function Ae(e,t){if(null!==e&&"function"!=typeof e)throw m.create("invalid-log-argument");var i=e,r=t;for(const n of X){let a=null;r&&r.level&&(a=Q[r.level]),n.userLogHandler=null===i?null:(e,t,...r)=>{var n=r.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}}).filter(e=>e).join(" ");t>=(null!=a?a:e.logLevel)&&i({level:c[t].toLowerCase(),message:n,args:r,type:e.name})}}}function De(e){var t=e;X.forEach(e=>{e.setLogLevel(t)})}const b="firebase-heartbeat-store";let Ne=null;function Oe(){return Ne=Ne||fe("firebase-heartbeat-database",1,{upgrade:(e,t)=>{0===t&&e.createObjectStore(b)}}).catch(e=>{throw m.create("idb-open",{originalErrorMessage:e.message})})}async function ke(e,t){try{const r=(await Oe()).transaction(b,"readwrite"),n=r.objectStore(b);await n.put(t,Le(e)),await r.done}catch(e){if(e instanceof a)u.warn(e.message);else{const t=m.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});u.warn(t.message)}}}function Le(e){return e.name+"!"+e.options.appId}class Pe{constructor(e){this.container=e,this._heartbeatsCache=null;e=this.container.getProvider("app").getImmediate();this._storage=new Be(e),this._heartbeatsCachePromise=this._storage.read().then(e=>this._heartbeatsCache=e)}async triggerHeartbeat(){var e;const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Me();if(null==(null==(e=this._heartbeatsCache)?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some(e=>e.date===r))return this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{e=new Date(e.date).valueOf();return Date.now()-e<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null==(e=this._heartbeatsCache)?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";var e=Me(),{heartbeatsToSend:t,unsentEntries:r}=function(e){const t=[];let r=e.slice();for(const n of e){const e=t.find(e=>e.agent===n.agent);if(e){if(e.dates.push(n.date),1024<Re(t)){e.dates.pop();break}}else if(t.push({agent:n.agent,dates:[n.date]}),1024<Re(t)){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(this._heartbeatsCache.heartbeats),t=U(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,0<r.length?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),t}}function Me(){return(new Date).toISOString().substring(0,10)}class Be{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!z()&&q().then(()=>!0).catch(()=>!1)}async read(){return await this._canUseIndexedDBPromise&&await async function(e){try{const r=await Oe();return await r.transaction(b).objectStore(b).get(Le(e))}catch(e){var t;e instanceof a?u.warn(e.message):(t=m.create("idb-get",{originalErrorMessage:null==e?void 0:e.message}),u.warn(t.message))}}(this.app)||{heartbeats:[]}}async overwrite(e){var t,r;if(await this._canUseIndexedDBPromise)return r=await this.read(),ke(this.app,{lastSentHeartbeatDate:null!=(t=e.lastSentHeartbeatDate)?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}async add(e){var t,r;if(await this._canUseIndexedDBPromise)return r=await this.read(),ke(this.app,{lastSentHeartbeatDate:null!=(t=e.lastSentHeartbeatDate)?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}}function Re(e){return U(JSON.stringify({version:2,heartbeats:e})).length}f(new i("platform-logger",e=>new _e(e),"PRIVATE")),f(new i("heartbeat",e=>new Pe(e),"PRIVATE")),e(we,Ee,""),e(we,Ee,"esm2017"),e("fire-js","");var r,t,je=Object.freeze({__proto__:null,SDK_VERSION:"10.6.0",_DEFAULT_ENTRY_NAME:p,_addComponent:Ie,_addOrOverwriteComponent:function(e,t){e.container.addOrOverwriteComponent(t)},_apps:h,_clearComponents:function(){d.clear()},_components:d,_getProvider:g,_registerComponent:f,_removeServiceInstance:function(e,t,r="[DEFAULT]"){g(e,t).clearInstance(r)},deleteApp:Ce,getApp:function(e="[DEFAULT]"){var t=h.get(e);if(!t&&e===p&&H())return Te();if(t)return t;throw m.create("no-app",{appName:e})},getApps:function(){return Array.from(h.values())},initializeApp:Te,onLog:Ae,registerVersion:e,setLogLevel:De,FirebaseError:a});class Fe{constructor(e,t){this._delegate=e,this.firebase=t,Ie(e,new i("app-compat",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return this.firebase.INTERNAL.removeApp(this.name),Ce(this._delegate)}_getService(e,t="[DEFAULT]"){return this._delegate.checkDestroyed(),this._delegate.container.getProvider(e).getImmediate({identifier:t})}}const Ue=new n("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});function $e(a){const r={},i={__esModule:!0,initializeApp:function(e,t={}){e=Te(e,t);if(K(r,e.name))return r[e.name];t=new a(e,i);return r[e.name]=t},app:o,registerVersion:e,setLogLevel:De,onLog:Ae,apps:null,SDK_VERSION:"10.6.0",INTERNAL:{registerComponent:function(t){const r=t.name,n=r.replace("-compat","");var e;return f(t)&&"PUBLIC"===t.type&&(e=(e=o())=>{if("function"!=typeof e[n])throw Ue.create("invalid-app-argument",{appName:r});return e[n]()},void 0!==t.serviceProps&&function e(t,r){if(!(r instanceof Object))return r;switch(r.constructor){case Date:return new Date(r.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return r}for(const n in r)r.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=e(t[n],r[n]));return t}(e,t.serviceProps),i[n]=e,a.prototype[n]=function(...e){return this._getService.bind(this,r).apply(this,t.multipleInstances?e:[])}),"PUBLIC"===t.type?i[n]:null},removeApp:function(e){delete r[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:je}};function o(e){if(K(r,e=e||p))return r[e];throw Ue.create("no-app",{appName:e})}return i.default=i,Object.defineProperty(i,"apps",{get:function(){return Object.keys(r).map(e=>r[e])}}),o.App=a,i}const v=function(){const e=$e(Fe),t=(e.SDK_VERSION=e.SDK_VERSION+"_LITE",e.INTERNAL.registerComponent);return e.INTERNAL.registerComponent=function(e){if("PUBLIC"!==e.type||e.name.includes("performance")||e.name.includes("installations"))return t(e);throw Error(name+" cannot register with the standalone perf instance")},e}(),Ve=(e("@firebase/app-compat","0.2.23","lite"),v.registerVersion("firebase","10.6.0","app-compat"),"@firebase/installations"),He=1e4,xe="w:0.6.4",ze="FIS_v2",qe=36e5,_=new n("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function We(e){return e instanceof a&&e.code.includes("request-failed")}function Ke({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function Je(e){return{token:e.token,requestStatus:2,expiresIn:(e=e.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()}}async function Ge(e,t){t=(await t.json()).error;return _.create("request-failed",{requestName:e,serverCode:t.code,serverMessage:t.message,serverStatus:t.status})}function Ye({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}async function Xe(e){var t=await e();return 500<=t.status&&t.status<600?e():t}function Ze(t){return new Promise(e=>{setTimeout(e,t)})}const Qe=/^[cdef][\w-]{21}$/;function w(e){return e.appName+"!"+e.appId}const et=new Map;function tt(e,t){e=w(e);rt(e,t);{!E&&"BroadcastChannel"in self&&((E=new BroadcastChannel("[Firebase] FID Change")).onmessage=e=>{rt(e.data.key,e.data.fid)});const r=E;return r&&r.postMessage({key:e,fid:t}),void(0===et.size&&E&&(E.close(),E=null))}}function rt(e,t){var r=et.get(e);if(r)for(const e of r)e(t)}let E=null;const y="firebase-installations-store";let nt=null;function at(){return nt=nt||fe("firebase-installations-database",1,{upgrade:(e,t)=>{0===t&&e.createObjectStore(y)}})}async function I(e,t){const r=w(e),n=(await at()).transaction(y,"readwrite"),a=n.objectStore(y),i=await a.get(r);return await a.put(t,r),await n.done,i&&i.fid===t.fid||tt(e,t.fid),t}async function it(e){const t=w(e),r=(await at()).transaction(y,"readwrite");await r.objectStore(y).delete(t),await r.done}async function S(e,t){const r=w(e),n=(await at()).transaction(y,"readwrite"),a=n.objectStore(y),i=await a.get(r),o=t(i);return void 0===o?await a.delete(r):await a.put(o,r),await n.done,!o||i&&i.fid===o.fid||tt(e,o.fid),o}async function ot(t){let r;var e=await S(t.appConfig,e=>{e=ct(e||{fid:function(){try{const r=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(r),r[0]=112+r[0]%16;t=r;var e=btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_").substr(0,22);return Qe.test(e)?e:""}catch(e){return""}var t}(),registrationStatus:0}),e=function(e,t){if(0!==t.registrationStatus)return 1===t.registrationStatus?{installationEntry:t,registrationPromise:async function(e){let t=await st(e.appConfig);for(;1===t.registrationStatus;)await Ze(100),t=await st(e.appConfig);if(0!==t.registrationStatus)return t;{const{installationEntry:t,registrationPromise:r}=await ot(e);return r||t}}(e)}:{installationEntry:t};if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(_.create("app-offline"))};t={fid:t.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:t,registrationPromise:async function(t,r){try{var e=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:r}){const n=Ke(e),a=Ye(e),i=t.getImmediate({optional:!0});if(i){const e=await i.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const o={fid:r,authVersion:ze,appId:e.appId,sdkVersion:xe},s={method:"POST",headers:a,body:JSON.stringify(o)},c=await Xe(()=>fetch(n,s));if(c.ok){const e=await c.json();return{fid:e.fid||r,registrationStatus:2,refreshToken:e.refreshToken,authToken:Je(e.authToken)}}throw await Ge("Create Installation",c)}(t,r);return I(t.appConfig,e)}catch(e){throw We(e)&&409===e.customData.serverCode?await it(t.appConfig):await I(t.appConfig,{fid:r.fid,registrationStatus:0}),e}}(e,t)}}(t,e);return r=e.registrationPromise,e.installationEntry});return""===e.fid?{installationEntry:await r}:{installationEntry:e,registrationPromise:r}}function st(e){return S(e,e=>{if(e)return ct(e);throw _.create("installation-not-found")})}function ct(e){return 1===e.registrationStatus&&e.registrationTime+He<Date.now()?{fid:e.fid,registrationStatus:0}:e}async function lt({appConfig:e,heartbeatServiceProvider:t},r){[o,s]=[e,r["fid"]];const n=Ke(o)+`/${s}/authTokens:generate`,a=function(e,{refreshToken:t}){const r=Ye(e);return r.append("Authorization","FIS_v2 "+t),r}(e,r),i=t.getImmediate({optional:!0});var o,s;if(i){const e=await i.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const c={installation:{sdkVersion:xe,appId:e.appId}},l={method:"POST",headers:a,body:JSON.stringify(c)},u=await Xe(()=>fetch(n,l));if(u.ok)return Je(await u.json());throw await Ge("Generate Auth Token",u)}async function ut(a,i=!1){let o;var e=await S(a.appConfig,e=>{if(!ht(e))throw _.create("not-registered");var t,r,n=e.authToken;if(!(i||2!==n.requestStatus||(t=n,(r=Date.now())<t.creationTime||t.creationTime+t.expiresIn<r+qe)))return e;if(1===n.requestStatus)return o=async function(e,t){let r=await pt(e.appConfig);for(;1===r.authToken.requestStatus;)await Ze(100),r=await pt(e.appConfig);var n=r.authToken;return 0===n.requestStatus?ut(e,t):n}(a,i),e;{if(!navigator.onLine)throw _.create("app-offline");t=e,r={requestStatus:1,requestTime:Date.now()};const i=Object.assign(Object.assign({},t),{authToken:r});return o=async function(t,r){try{var e=await lt(t,r),n=Object.assign(Object.assign({},r),{authToken:e});return await I(t.appConfig,n),e}catch(e){throw!We(e)||401!==e.customData.serverCode&&404!==e.customData.serverCode?(n=Object.assign(Object.assign({},r),{authToken:{requestStatus:0}}),await I(t.appConfig,n)):await it(t.appConfig),e}}(a,i),i}});return o?await o:e.authToken}function pt(e){return S(e,e=>{if(!ht(e))throw _.create("not-registered");var t=e.authToken;return 1===t.requestStatus&&t.requestTime+He<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function ht(e){return void 0!==e&&2===e.registrationStatus}function dt(e){return _.create("missing-app-config-values",{valueName:e})}const ft="installations",gt=(f(new i(ft,e=>{e=e.getProvider("app").getImmediate();return{app:e,appConfig:function(e){if(!e||!e.options)throw dt("App Configuration");if(!e.name)throw dt("App Name");for(const t of["projectId","apiKey","appId"])if(!e.options[t])throw dt(t);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(e),heartbeatServiceProvider:g(e,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),f(new i("installations-internal",e=>{const t=g(e.getProvider("app").getImmediate(),ft).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:r,registrationPromise:n}=await ot(t);return(n||ut(t)).catch(console.error),r.fid}(t),getToken:e=>async function(e,t=!1){var r;return await(!(r=(await ot(e)).registrationPromise)||!await r),(await ut(e,t)).token}(t,e)}},"PRIVATE")),e(Ve,"0.6.4"),e(Ve,"0.6.4","esm2017"),"@firebase/performance"),mt="0.6.4",bt=mt,vt="FB-PERF-TRACE-MEASURE",_t="@firebase/performance/config",wt="@firebase/performance/configexpire",Et="Performance",T=new n("performance",Et,{"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."}),C=new ne(Et);let yt,It,A,St;C.logLevel=c.INFO;class D{constructor(e){if(!(this.window=e))throw T.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){this.performance&&this.performance.mark&&this.performance.mark(e)}measure(e,t,r){this.performance&&this.performance.measure&&this.performance.measure(e,t,r)}getEntriesByType(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]}getEntriesByName(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return fetch&&Promise&&"undefined"!=typeof navigator&&navigator.cookieEnabled?!!z()||(C.info("IndexedDB is not supported by current browser"),!1):(C.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)}setupObserver(e,r){this.PerformanceObserver&&new this.PerformanceObserver(e=>{for(const t of e.getEntries())r(t)}).observe({entryTypes:[e]})}static getInstance(){return yt=void 0===yt?new D(It):yt}}function Tt(t,r){var e=t.length-r.length;if(e<0||1<e)throw T.create("invalid String merger input");const n=[];for(let e=0;e<t.length;e++)n.push(t.charAt(e)),r.length>e&&n.push(r.charAt(e));return n.join("")}class N{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=Tt("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=Tt("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return St=void 0===St?new N:St}}(t=r=r||{})[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN";const Ct=["firebase_","google_","ga_"],At=new RegExp("^[a-zA-Z]\\w*$");function Dt(){switch(D.getInstance().document.visibilityState){case"visible":return r.VISIBLE;case"hidden":return r.HIDDEN;default:return r.UNKNOWN}}function Nt(e){e=null==(e=e.options)?void 0:e.appId;if(e)return e;throw T.create("no app id")}const Ot="0.0.1",O={loggingEnabled:!0},kt="FIREBASE_INSTALLATIONS_AUTH";function Lt(e,t){var n,a,r=function(){const e=D.getInstance().localStorage;if(e){var t=e.getItem(wt);if(t&&Number(t)>Date.now()){t=e.getItem(_t);if(t)try{return JSON.parse(t)}catch(e){return}}}}();return r?(Mt(r),Promise.resolve()):(n=e,a=t,function(){const e=n.installations.getToken();return e.then(e=>{}),e}().then(e=>{var t=function(){var e=null==(e=n.app.options)?void 0:e.projectId;if(e)return e;throw T.create("no project id")}(),r=function(){var e=null==(e=n.app.options)?void 0:e.apiKey;if(e)return e;throw T.create("no api key")}(),t=new Request(`https://firebaseremoteconfig.googleapis.com/v1/projects/${t}/namespaces/fireperf:fetch?key=`+r,{method:"POST",headers:{Authorization:kt+" "+e},body:JSON.stringify({app_instance_id:a,app_instance_id_token:e,app_id:Nt(n.app),app_version:bt,sdk_version:Ot})});return fetch(t).then(e=>{if(e.ok)return e.json();throw T.create("RC response not ok")})}).catch(()=>{C.info(Pt)}).then(Mt).then(e=>{{const t=D.getInstance().localStorage;return void(e&&t&&(t.setItem(_t,JSON.stringify(e)),t.setItem(wt,String(Date.now()+60*N.getInstance().configTimeToLive*60*1e3))))}},()=>{}))}const Pt="Could not fetch config, will use default configs";function Mt(e){if(!e)return e;const t=N.getInstance(),r=e.entries||{};return void 0!==r.fpr_enabled?t.loggingEnabled="true"===String(r.fpr_enabled):t.loggingEnabled=O.loggingEnabled,r.fpr_log_source?t.logSource=Number(r.fpr_log_source):O.logSource&&(t.logSource=O.logSource),r.fpr_log_endpoint_url?t.logEndPointUrl=r.fpr_log_endpoint_url:O.logEndPointUrl&&(t.logEndPointUrl=O.logEndPointUrl),r.fpr_log_transport_key?t.transportKey=r.fpr_log_transport_key:O.transportKey&&(t.transportKey=O.transportKey),void 0!==r.fpr_vc_network_request_sampling_rate?t.networkRequestsSamplingRate=Number(r.fpr_vc_network_request_sampling_rate):void 0!==O.networkRequestsSamplingRate&&(t.networkRequestsSamplingRate=O.networkRequestsSamplingRate),void 0!==r.fpr_vc_trace_sampling_rate?t.tracesSamplingRate=Number(r.fpr_vc_trace_sampling_rate):void 0!==O.tracesSamplingRate&&(t.tracesSamplingRate=O.tracesSamplingRate),t.logTraceAfterSampling=Bt(t.tracesSamplingRate),t.logNetworkAfterSampling=Bt(t.networkRequestsSamplingRate),e}function Bt(e){return Math.random()<=e}let Rt,jt=1;function Ft(e){return jt=2,Rt=Rt||(t=e,function(){const r=D.getInstance().document;return new Promise(e=>{if(r&&"complete"!==r.readyState){const t=()=>{"complete"===r.readyState&&(r.removeEventListener("readystatechange",t),e())};r.addEventListener("readystatechange",t)}else e()})}().then(()=>{{const e=t.installations.getId();return e.then(e=>{A=e}),e}}).then(e=>Lt(t,e)).then(()=>Ut(),()=>Ut()));var t}function Ut(){jt=3}let $t,k=3,L=[],Vt=!1;function P(e){setTimeout(()=>{if(0!==k)if(L.length){const r=L.splice(0,1e3),a=r.map(e=>({source_extension_json_proto3:e.message,event_time_ms:String(e.eventTime)}));var e,n,t;e={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:N.getInstance().logSource,log_event:a},n=r,e=e,t=N.getInstance().getFlTransportFullUrl(),fetch(t,{method:"POST",body:JSON.stringify(e)}).then(e=>(e.ok||C.info("Call to Firebase backend failed."),e.json())).then(e=>{var t=Number(e.nextRequestWaitMillis);let r=1e4;isNaN(t)||(r=Math.max(t,r));t=e.logResponseDetails;Array.isArray(t)&&0<t.length&&"RETRY_REQUEST_LATER"===t[0].responseAction&&(L=[...n,...L],C.info("Retry transport request later.")),k=3,P(r)}).catch(()=>{L=[...r,...L],k--,C.info(`Tries left: ${k}.`),P(1e4)});return}else return P(1e4)},e)}function Ht(e,t){var r;($t=$t||(r=zt,(...e)=>{e={message:r(...e),eventTime:Date.now()};if(!e.eventTime||!e.message)throw T.create("invalid cc log");L=[...L,e]}))(e,t)}function M(e){var t=N.getInstance();!t.instrumentationEnabled&&e.isAuto||!t.dataCollectionEnabled&&!e.isAuto||!D.getInstance().requiredApisAvailable()||e.isAuto&&Dt()!==r.VISIBLE||(3===jt?xt(e):Ft(e.performanceController).then(()=>xt(e),()=>xt(e)))}function xt(e){var t;!A||(t=N.getInstance()).loggingEnabled&&t.logTraceAfterSampling&&setTimeout(()=>Ht(e,1),0)}function zt(e,t){if(0===t)return t={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},t={application_info:qt(e.performanceController.app),network_request_metric:t},JSON.stringify(t);{t=e;const r={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(r.counters=t.counters);e=t.getAttributes(),e=(0!==Object.keys(e).length&&(r.custom_attributes=e),{application_info:qt(t.performanceController.app),trace_metric:r});return JSON.stringify(e)}}function qt(e){return{google_app_id:Nt(e),app_instance_id:A,web_app_info:{sdk_version:bt,page_url:D.getInstance().getUrl(),service_worker_status:null!=(e=D.getInstance().navigator)&&e.serviceWorker?e.serviceWorker.controller?2:3:1,visibility_state:Dt(),effective_connection_type:function(){var e=D.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0}}const Wt=["_fp","_fcp","_fid"];class B{constructor(e,t,r=!1,n){this.performanceController=e,this.name=t,this.isAuto=r,this.state=1,this.customAttributes={},this.counters={},this.api=D.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark=`FB-PERF-TRACE-START-${this.randomId}-`+this.name,this.traceStopMark=`FB-PERF-TRACE-STOP-${this.randomId}-`+this.name,this.traceMeasure=n||`FB-PERF-TRACE-MEASURE-${this.randomId}-`+this.name,n&&this.calculateTraceMetrics())}start(){if(1!==this.state)throw T.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(2!==this.state)throw T.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),M(this)}record(e,t,r){if(e<=0)throw T.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw T.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),r&&r.attributes&&(this.customAttributes=Object.assign({},r.attributes)),r&&r.metrics)for(const e of Object.keys(r.metrics))isNaN(Number(r.metrics[e]))||(this.counters[e]=Math.floor(Number(r.metrics[e])));M(this)}incrementMetric(e,t=1){void 0===this.counters[e]?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)}putMetric(e,t){if(n=e,r=this.name,0===n.length||100<n.length||!(r&&r.startsWith("_wt_")&&-1<Wt.indexOf(n))&&n.startsWith("_"))throw T.create("invalid custom metric name",{customMetricName:e});var r,n;this.counters[e]=(r=null!=t?t:0,(n=Math.floor(r))<r&&C.info(`Metric value should be an Integer, setting the value as : ${n}.`),n)}getMetric(e){return this.counters[e]||0}putAttribute(e,t){var r,n=!(0===(r=e).length||40<r.length||Ct.some(e=>r.startsWith(e))||!r.match(At)),a=0!==t.length&&t.length<=100;if(n&&a)this.customAttributes[e]=t;else{if(!n)throw T.create("invalid attribute name",{attributeName:e});if(!a)throw T.create("invalid attribute value",{attributeValue:t})}}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){var e=this.api.getEntriesByName(this.traceMeasure),e=e&&e[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))}static createOobTrace(e,t,r,n){var a=D.getInstance().getUrl();if(a){const i=new B(e,"_wt_"+a,!0),o=Math.floor(1e3*D.getInstance().getTimeOrigin());if(i.setStartTime(o),t&&t[0]&&(i.setDuration(Math.floor(1e3*t[0].duration)),i.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),i.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),i.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),r){const e=r.find(e=>"first-paint"===e.name),t=(e&&e.startTime&&i.putMetric("_fp",Math.floor(1e3*e.startTime)),r.find(e=>"first-contentful-paint"===e.name));t&&t.startTime&&i.putMetric("_fcp",Math.floor(1e3*t.startTime)),n&&i.putMetric("_fid",Math.floor(1e3*n))}M(i)}}static createUserTimingTrace(e,t){M(new B(e,t,!1,t))}}function Kt(e,t){const r=t;if(r&&void 0!==r.responseStart){var t=D.getInstance().getTimeOrigin(),t=Math.floor(1e3*(r.startTime+t)),n=r.responseStart?Math.floor(1e3*(r.responseStart-r.startTime)):void 0,a=Math.floor(1e3*(r.responseEnd-r.startTime));{var i={performanceController:e,url:r.name&&r.name.split("?")[0],responsePayloadBytes:r.transferSize,startTimeUs:t,timeToResponseInitiatedUs:n,timeToResponseCompletedUs:a};const o=N.getInstance();o.instrumentationEnabled&&(e=i.url,t=o.logEndPointUrl.split("?")[0],n=o.flTransportEndpointUrl.split("?")[0],e!==t&&e!==n&&o.loggingEnabled&&o.logNetworkAfterSampling&&setTimeout(()=>Ht(i,0),0))}}}function Jt(i){A&&(setTimeout(()=>{{var r=i;const e=D.getInstance(),n=e.getEntriesByType("navigation"),a=e.getEntriesByType("paint");if(e.onFirstInputDelay){let t=setTimeout(()=>{B.createOobTrace(r,n,a),t=void 0},5e3);e.onFirstInputDelay(e=>{t&&(clearTimeout(t),B.createOobTrace(r,n,a,e))})}else B.createOobTrace(r,n,a);return}},0),setTimeout(()=>{{var t=i;const e=D.getInstance(),r=e.getEntriesByType("resource");for(const e of r)Kt(t,e);return void e.setupObserver("resource",e=>Kt(t,e))}},0),setTimeout(()=>{{var t=i;const e=D.getInstance(),r=e.getEntriesByType("measure");for(const e of r)Gt(t,e);return void e.setupObserver("measure",e=>Gt(t,e))}},0))}function Gt(e,t){const r=t.name;r.substring(0,vt.length)!==vt&&B.createUserTimingTrace(e,r)}class Yt{constructor(e,t){this.app=e,this.installations=t,this.initialized=!1}_init(e){this.initialized||(void 0!==(null==e?void 0:e.dataCollectionEnabled)&&(this.dataCollectionEnabled=e.dataCollectionEnabled),void 0!==(null==e?void 0:e.instrumentationEnabled)&&(this.instrumentationEnabled=e.instrumentationEnabled),D.getInstance().requiredApisAvailable()?q().then(e=>{e&&(Vt||(P(5500),Vt=!0),Ft(this).then(()=>Jt(this),()=>Jt(this)),this.initialized=!0)}).catch(e=>{C.info("Environment doesn't support IndexedDB: "+e)}):C.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){N.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return N.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){N.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return N.getInstance().dataCollectionEnabled}}f(new i("performance",(e,{options:t})=>{var r,n=e.getProvider("app").getImmediate(),e=e.getProvider("installations-internal").getImmediate();if("[DEFAULT]"!==n.name)throw T.create("FB not default");if("undefined"==typeof window)throw T.create("no window");r=window,It=r;const a=new Yt(n,e);return a._init(t),a},"PUBLIC")),e(gt,mt),e(gt,mt,"esm2017");class Xt{constructor(e,t){this.app=e,this._delegate=t}get instrumentationEnabled(){return this._delegate.instrumentationEnabled}set instrumentationEnabled(e){this._delegate.instrumentationEnabled=e}get dataCollectionEnabled(){return this._delegate.dataCollectionEnabled}set dataCollectionEnabled(e){this._delegate.dataCollectionEnabled=e}trace(e){return t=this._delegate,e=e,t=t&&t._delegate?t._delegate:t,new B(t,e);var t}}return(t=v).INTERNAL.registerComponent(new i("performance-compat",function(e){var t=e.getProvider("app-compat").getImmediate(),e=e.getProvider("performance").getImmediate();return new Xt(t,e)},"PUBLIC")),t.registerVersion("@firebase/performance-compat","0.2.4"),v.registerVersion("firebase","10.6.0","compat-lite"),v});