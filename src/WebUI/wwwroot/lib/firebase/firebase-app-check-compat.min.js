!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("@firebase/app-compat"),require("@firebase/app")):"function"==typeof define&&define.amd?define(["@firebase/app-compat","@firebase/app"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).firebase,e.firebase.INTERNAL.modularAPIs)}(this,function(ue,de){"use strict";try{!function(){var t,e=(e=ue)&&"object"==typeof e&&"default"in e?e:{default:e};const r={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(a,e){if(!Array.isArray(a))throw Error("encodeByteArray takes an array as a parameter");this.init_();var o=e?this.byteToCharMapWebSafe_:this.byteToCharMap_;const n=[];for(let r=0;r<a.length;r+=3){var i=a[r],s=r+1<a.length,c=s?a[r+1]:0,h=r+2<a.length,l=h?a[r+2]:0;let e=(15&c)<<2|l>>6,t=63&l;h||(t=64,s||(e=64)),n.push(o[i>>2],o[(3&i)<<4|c>>4],o[e],o[t])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(function(r){const a=[];let o=0;for(let t=0;t<r.length;t++){let e=r.charCodeAt(t);e<128?a[o++]=e:(e<2048?a[o++]=e>>6|192:(55296==(64512&e)&&t+1<r.length&&56320==(64512&r.charCodeAt(t+1))?(e=65536+((1023&e)<<10)+(1023&r.charCodeAt(++t)),a[o++]=e>>18|240,a[o++]=e>>12&63|128):a[o++]=e>>12|224,a[o++]=e>>6&63|128),a[o++]=63&e|128)}return a}(e),t)},decodeString(r,a){if(this.HAS_NATIVE_SUPPORT&&!a)return atob(r);{var o=this.decodeStringToByteArray(r,a);const c=[];let e=0,t=0;for(;e<o.length;){var n,i,s=o[e++];s<128?c[t++]=String.fromCharCode(s):191<s&&s<224?(n=o[e++],c[t++]=String.fromCharCode((31&s)<<6|63&n)):239<s&&s<365?(i=((7&s)<<18|(63&o[e++])<<12|(63&o[e++])<<6|63&o[e++])-65536,c[t++]=String.fromCharCode(55296+(i>>10)),c[t++]=String.fromCharCode(56320+(1023&i))):(n=o[e++],i=o[e++],c[t++]=String.fromCharCode((15&s)<<12|(63&n)<<6|63&i))}return c.join("")}},decodeStringToByteArray(t,e){this.init_();var r=e?this.charToByteMapWebSafe_:this.charToByteMap_;const a=[];for(let e=0;e<t.length;){var o=r[t.charAt(e++)],n=e<t.length?r[t.charAt(e)]:0,i=++e<t.length?r[t.charAt(e)]:64,s=++e<t.length?r[t.charAt(e)]:64;if(++e,null==o||null==n||null==i||null==s)throw new L;a.push(o<<2|n>>4),64!==i&&(a.push(n<<4&240|i>>2),64!==s&&a.push(i<<6&192|s))}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class L extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}function i(e){try{return r.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}class u{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(r){return(e,t)=>{e?this.reject(e):this.resolve(t),"function"==typeof r&&(this.promise.catch(()=>{}),1===r.length?r(e):r(e,t))}}}function d(){try{return"object"==typeof indexedDB}catch(e){return}}class o extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,o.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,a.prototype.create)}}class a{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){var a,t=t[0]||{},r=this.service+"/"+e,e=(e=this.errors[e])?(a=t,e.replace(B,(e,t)=>{var r=a[t];return null!=r?String(r):`<${t}?>`})):"Error",e=this.serviceName+`: ${e} (${r}).`;return new o(r,e,t)}}const B=/\{\$([^}]+)}/g;function s(e){return JSON.parse(e)}class n{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}t={DEBUG:0,0:"DEBUG",VERBOSE:1,1:"VERBOSE",INFO:2,2:"INFO",WARN:3,3:"WARN",ERROR:4,4:"ERROR",SILENT:5,5:"SILENT"};const H={debug:t.DEBUG,verbose:t.VERBOSE,info:t.INFO,warn:t.WARN,error:t.ERROR,silent:t.SILENT},j=t.INFO,W={[t.DEBUG]:"log",[t.VERBOSE]:"log",[t.INFO]:"info",[t.WARN]:"warn",[t.ERROR]:"error"},F=(e,t,...r)=>{if(!(t<e.logLevel)){var a=(new Date).toISOString(),o=W[t];if(!o)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[o](`[${a}]  ${e.name}:`,...r)}},g=new Map,f={activated:!1,tokenObservers:[]},v={initialized:!1,enabled:!1};function E(e){return g.get(e)||Object.assign({},f)}const c="https://content-firebaseappcheck.googleapis.com/v1",$="exchangeDebugToken",h={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class V{constructor(e,t,r,a,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=a,this.upperBound=o,this.pending=null,o<(this.nextErrorWaitInterval=a))throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new u,t=this.getNextRun(e),await new Promise(e=>{setTimeout(e,t)}),this.pending.resolve(),await this.pending.promise,this.pending=new u,await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(e){this.retryPolicy(e)?this.process(!1).catch(()=>{}):this.stop()}var t}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}const _=new a("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function l(e=!1){return e?null==(e=self.grecaptcha)?void 0:e.enterprise:self.grecaptcha}function p(e){if(!E(e).activated)throw _.create("use-before-activation",{appName:e.name})}function w(e){var e=Math.round(e/1e3),t=Math.floor(e/86400),r=Math.floor((e-3600*t*24)/3600),a=Math.floor((e-3600*t*24-3600*r)/60),e=e-3600*t*24-3600*r-60*a;let o="";return t&&(o+=k(t)+"d:"),r&&(o+=k(r)+"h:"),o+=k(a)+"m:"+k(e)+"s"}function k(e){return 0===e?"00":10<=e?e.toString():"0"+e}async function m({url:e,body:t},r){const a={"Content-Type":"application/json"},o=r.getImmediate({optional:!0});o&&(s=await o.getHeartbeatsHeader())&&(a["X-Firebase-Client"]=s);r={method:"POST",body:JSON.stringify(t),headers:a};let n;try{n=await fetch(e,r)}catch(e){throw _.create("fetch-network-error",{originalErrorMessage:null==e?void 0:e.message})}if(200!==n.status)throw _.create("fetch-status-error",{httpStatus:n.status});let i;try{i=await n.json()}catch(e){throw _.create("fetch-parse-error",{originalErrorMessage:null==e?void 0:e.message})}var s=i.ttl.match(/^([\d.]+)(s)$/);if(s&&s[2]&&!isNaN(Number(s[1])))return r=1e3*Number(s[1]),s=Date.now(),{token:i.token,expireTimeMillis:s+r,issuedAtTimeMillis:s};throw _.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+i.ttl})}function K(e,t){var{projectId:e,appId:r,apiKey:a}=e.options;return{url:`${c}/projects/${e}/apps/${r}:${$}?key=`+a,body:{debug_token:t}}}const b="firebase-app-check-store",z="debug-token";let U=null;function q(){return U||(U=new Promise((t,r)=>{try{const e=indexedDB.open("firebase-app-check-database",1);e.onsuccess=e=>{t(e.target.result)},e.onerror=e=>{r(_.create("storage-open",{originalErrorMessage:null==(e=e.target.error)?void 0:e.message}))},e.onupgradeneeded=e=>{const t=e.target.result;0===e.oldVersion&&t.createObjectStore(b,{keyPath:"compositeKey"})}}catch(e){r(_.create("storage-open",{originalErrorMessage:null==e?void 0:e.message}))}}))}async function G(e,t){const r=await q(),a=r.transaction(b,"readwrite"),o=a.objectStore(b),n=o.put({compositeKey:e,value:t});return new Promise((t,r)=>{n.onsuccess=e=>{t()},a.onerror=e=>{r(_.create("storage-set",{originalErrorMessage:null==(e=e.target.error)?void 0:e.message}))}})}async function X(e){const t=await q(),a=t.transaction(b,"readonly"),r=a.objectStore(b),o=r.get(e);return new Promise((t,r)=>{o.onsuccess=e=>{e=e.target.result;t(e?e.value:void 0)},a.onerror=e=>{r(_.create("storage-get",{originalErrorMessage:null==(e=e.target.error)?void 0:e.message}))}})}function J(e){return e.options.appId+"-"+e.name}const y=new class{constructor(e){this.name=e,this._logLevel=j,this._logHandler=F,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in t))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?H[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,t.DEBUG,...e),this._logHandler(this,t.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,t.VERBOSE,...e),this._logHandler(this,t.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,t.INFO,...e),this._logHandler(this,t.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,t.WARN,...e),this._logHandler(this,t.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,t.ERROR,...e),this._logHandler(this,t.ERROR,...e)}}("@firebase/app-check");function A(e,t){return d()?G(J(e),t).catch(e=>{y.warn("Failed to write token to IndexedDB. Error: "+e)}):Promise.resolve()}async function Y(){let e=void 0;try{e=await X(z)}catch(e){}if(e)return e;var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0,r="x"===e?t:3&t|8;return r.toString(16)}),r=t;return G(z,r).catch(e=>y.warn("Failed to persist debug token to IndexedDB. Error: "+e)),t}function T(){return v.enabled}async function C(){var e=v;if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}const Z={error:"UNKNOWN_ERROR"};async function S(e,t=!1){var r,a=e.app;p(a);const o=E(a);let n=o.token,i=void 0;if(n&&!I(n)&&(o.token=void 0,n=void 0),n||(r=await o.cachedTokenPromise)&&(I(r)?n=r:await A(a,void 0)),!t&&n&&I(n))return{token:n.token};let s=!1;if(T())return o.exchangeTokenPromise||(o.exchangeTokenPromise=m(K(a,await C()),e.heartbeatServiceProvider).finally(()=>{o.exchangeTokenPromise=void 0}),s=!0),await A(a,r=await o.exchangeTokenPromise),{token:(o.token=r).token};try{o.exchangeTokenPromise||(o.exchangeTokenPromise=o.provider.getToken().finally(()=>{o.exchangeTokenPromise=void 0}),s=!0),n=await E(a).exchangeTokenPromise}catch(e){"appCheck/throttled"===e.code?y.warn(e.message):y.error(e),i=e}let c;return n?i?c=I(n)?{token:n.token,internalError:i}:te(i):(c={token:n.token},await A(a,o.token=n)):c=te(i),s&&ee(a,c),c}function R(e,t,r,a){const o=E(e.app);if(a={next:r,error:a,type:t},o.tokenObservers=[...o.tokenObservers,a],o.token&&I(o.token)){const n=o.token;Promise.resolve().then(()=>{r({token:n.token}),Q(e)}).catch(()=>{})}o.cachedTokenPromise.then(()=>Q(e))}function P(e,t){const r=E(e);e=r.tokenObservers.filter(e=>e.next!==t);0===e.length&&r.tokenRefresher&&r.tokenRefresher.isRunning()&&r.tokenRefresher.stop(),r.tokenObservers=e}function Q(e){const t=E(e.app);let r=t.tokenRefresher;r||(r=function(t){const r=t.app;return new V(async()=>{var e=E(r).token?await S(t,!0):await S(t);if(e.error)throw e.error;if(e.internalError)throw e.internalError},()=>!0,()=>{var e,t=E(r);return t.token?(e=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5,t=t.token.expireTimeMillis-3e5,e=Math.min(e,t),Math.max(0,e-Date.now())):0},h.RETRIAL_MIN_WAIT,h.RETRIAL_MAX_WAIT)}(e),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function ee(e,t){for(const r of E(e).tokenObservers)try{"EXTERNAL"===r.type&&null!=t.error?r.error(t.error):r.next(t)}catch(e){}}function I(e){return 0<e.expireTimeMillis-Date.now()}function te(e){return{token:(t=Z,r.encodeString(JSON.stringify(t),!1)),error:e};var t}class re{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){for(const e of E(this.app).tokenObservers)P(this.app,e.next);return Promise.resolve()}}function ae(t,r){const a=new u,e=E(t),o=(e.reCAPTCHAState={initialized:a},ne(t));var n=l(!1);if(n)D(t,r,n,o,a);else{const i=document.createElement("script");i.src="https://www.google.com/recaptcha/api.js",i.onload=()=>{var e=l(!1);if(!e)throw new Error("no recaptcha");D(t,r,e,o,a)},document.head.appendChild(i)}return a.promise}function oe(t,r){const a=new u,e=E(t),o=(e.reCAPTCHAState={initialized:a},ne(t));var n=l(!0);if(n)D(t,r,n,o,a);else{const i=document.createElement("script");i.src="https://www.google.com/recaptcha/enterprise.js",i.onload=()=>{var e=l(!0);if(!e)throw new Error("no recaptcha");D(t,r,e,o,a)},document.head.appendChild(i)}return a.promise}function D(a,o,n,i,s){n.ready(()=>{{var e=a;const t=n.render(i,{sitekey:o,size:"invisible",callback:()=>{E(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{E(e).reCAPTCHAState.succeeded=!1}}),r=E(e);r.reCAPTCHAState=Object.assign(Object.assign({},r.reCAPTCHAState),{widgetId:t})}s.resolve(n)})}function ne(e){e="fire_app_check_"+e.name;const t=document.createElement("div");return t.id=e,t.style.display="none",document.body.appendChild(t),e}async function ie(a){p(a);const o=await E(a).reCAPTCHAState.initialized.promise;return new Promise((e,t)=>{const r=E(a).reCAPTCHAState;o.ready(()=>{e(o.execute(r.widgetId,{action:"fire_app_check"}))})})}class O{constructor(e){this._siteKey=e,this._throttleData=null}async getToken(){ce(this._throttleData);var e,t=await ie(this._app).catch(e=>{throw _.create("recaptcha-error")});if(null==(e=E(this._app).reCAPTCHAState)||!e.succeeded)throw _.create("recaptcha-error");let r;try{r=await m(function(e,t){var{projectId:e,appId:r,apiKey:a}=e.options;return{url:c+`/projects/${e}/apps/${r}:exchangeRecaptchaV3Token?key=`+a,body:{recaptcha_v3_token:t}}}(this._app,t),this._heartbeatServiceProvider)}catch(e){throw null!=(t=e.code)&&t.includes("fetch-status-error")?(this._throttleData=se(Number(null==(t=e.customData)?void 0:t.httpStatus),this._throttleData),_.create("throttled",{time:w(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):e}return this._throttleData=null,r}initialize(e){this._app=e,this._heartbeatServiceProvider=de._getProvider(e,"heartbeat"),ae(e,this._siteKey).catch(()=>{})}isEqual(e){return e instanceof O&&this._siteKey===e._siteKey}}class x{constructor(e){this._siteKey=e,this._throttleData=null}async getToken(){ce(this._throttleData);var e,t=await ie(this._app).catch(e=>{throw _.create("recaptcha-error")});if(null==(e=E(this._app).reCAPTCHAState)||!e.succeeded)throw _.create("recaptcha-error");let r;try{r=await m(function(e,t){var{projectId:e,appId:r,apiKey:a}=e.options;return{url:c+`/projects/${e}/apps/${r}:exchangeRecaptchaEnterpriseToken?key=`+a,body:{recaptcha_enterprise_token:t}}}(this._app,t),this._heartbeatServiceProvider)}catch(e){throw null!=(t=e.code)&&t.includes("fetch-status-error")?(this._throttleData=se(Number(null==(t=e.customData)?void 0:t.httpStatus),this._throttleData),_.create("throttled",{time:w(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):e}return this._throttleData=null,r}initialize(e){this._app=e,this._heartbeatServiceProvider=de._getProvider(e,"heartbeat"),oe(e,this._siteKey).catch(()=>{})}isEqual(e){return e instanceof x&&this._siteKey===e._siteKey}}class N{constructor(e){this._customProviderOptions=e}async getToken(){var e=await this._customProviderOptions.getToken(),t=null!==(t=function(e){const t=function(e){let t={},r={},a={},o="";try{var n=e.split(".");t=s(i(n[0])||""),r=s(i(n[1])||""),o=n[2],a=r.d||{},delete r.d}catch(e){}return{header:t,claims:r,data:a,signature:o}}(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null}(e.token))&&t<Date.now()&&0<t?1e3*t:Date.now();return Object.assign(Object.assign({},e),{issuedAtTimeMillis:t})}initialize(e){this._app=e}isEqual(e){return e instanceof N&&this._customProviderOptions.getToken.toString()===e._customProviderOptions.getToken.toString()}}function se(e,t){if(404===e||403===e)return{backoffCount:1,allowRequestsAfter:Date.now()+864e5,httpStatus:e};var r=t?t.backoffCount:0,a=(t=2,t=1e3*Math.pow(t,r),a=Math.round(.5*t*(Math.random()-.5)*2),Math.min(144e5,t+a));return{backoffCount:r+1,allowRequestsAfter:Date.now()+a,httpStatus:e}}function ce(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw _.create("throttled",{time:w(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}function he(e=de.getApp(),t){var r,a;e=(n=e)&&n._delegate?n._delegate:n;const o=de._getProvider(e,"app-check");if(!v.initialized){var n=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}();const c=v;if(c.initialized=!0,"string"==typeof n.FIREBASE_APPCHECK_DEBUG_TOKEN||!0===n.FIREBASE_APPCHECK_DEBUG_TOKEN){c.enabled=!0;const h=new u;c.token=h,"string"==typeof n.FIREBASE_APPCHECK_DEBUG_TOKEN?h.resolve(n.FIREBASE_APPCHECK_DEBUG_TOKEN):h.resolve(Y())}}if(T()&&C().then(e=>console.log(`App Check debug token: ${e}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),o.isInitialized()){var i=o.getImmediate();const l=o.getOptions();if(l.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&l.provider.isEqual(t.provider))return i;throw _.create("already-initialized",{appName:e.name})}i=o.initialize({options:t});{var s=e;n=t.provider,t=t.isTokenAutoRefreshEnabled,r=s,a=Object.assign({},f),g.set(r,a);const p=g.get(r);p.activated=!0,p.provider=n,p.cachedTokenPromise=async function(t){if(d()){let e=void 0;try{e=await X(J(t))}catch(e){y.warn("Failed to read token from IndexedDB. Error: "+e)}return e}}(s).then(e=>(e&&I(e)&&(p.token=e,ee(s,{token:e.token})),e)),p.isTokenAutoRefreshEnabled=void 0===t?s.automaticDataCollectionEnabled:t,p.provider.initialize(s)}return E(e).isTokenAutoRefreshEnabled&&R(i,"INTERNAL",()=>{}),i}const le="app-check-internal",M=(de._registerComponent(new n("app-check",e=>{var t=e.getProvider("app").getImmediate();return e=e.getProvider("heartbeat"),new re(t,e)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider(le).initialize()})),de._registerComponent(new n(le,e=>{return t=e.getProvider("app-check").getImmediate(),{getToken:e=>S(t,e),getLimitedUseToken:()=>async function(e){var t=e.app;p(t);const r=E(t).provider;return T()?{token:(await m(K(t,await C()),e.heartbeatServiceProvider)).token}:{token:(await r.getToken()).token}}(t),addTokenListener:e=>R(t,"INTERNAL",e),removeTokenListener:e=>P(t.app,e)};var t},"PUBLIC").setInstantiationMode("EXPLICIT")),de.registerVersion("@firebase/app-check","0.8.0"),new a("appCheck","AppCheck",{"use-before-activation":"App Check is being used before activate() is called for FirebaseApp {$appName}. Call activate() before instantiating other Firebase services."}));class pe{constructor(e){this.app=e}activate(e,t){e="string"==typeof e?new O(e):e instanceof x||e instanceof O||e instanceof N?e:new N({getToken:e.getToken});this._delegate=he(this.app,{provider:e,isTokenAutoRefreshEnabled:t})}setTokenAutoRefreshEnabled(e){if(!this._delegate)throw M.create("use-before-activation",{appName:this.app.name});{var t;const r=E(this._delegate.app);return r.tokenRefresher&&(!0===e?r.tokenRefresher.start():r.tokenRefresher.stop()),void(r.isTokenAutoRefreshEnabled=e)}}getToken(t){if(this._delegate)return async function(e){e=await S(e,t);if(e.error)throw e.error;return{token:e.token}}(this._delegate);throw M.create("use-before-activation",{appName:this.app.name})}onTokenChanged(r,a,e){if(this._delegate){var o=this._delegate;let e,t=()=>{};return e=null!=r.next?r.next.bind(r):r,null!=r.error?t=r.error.bind(r):a&&(t=a),R(o,"EXTERNAL",e,t),()=>P(o.app,e)}throw M.create("use-before-activation",{appName:this.app.name})}}e.default.INTERNAL.registerComponent(new n("appCheck-compat",e=>{e=e.getProvider("app-compat").getImmediate();return new pe(e)},"PUBLIC").setServiceProps({ReCaptchaEnterpriseProvider:x,ReCaptchaV3Provider:O,CustomProvider:N})),e.default.registerVersion("@firebase/app-check-compat","0.3.7")}.apply(this,arguments)}catch(e){throw console.error(e),new Error("Cannot instantiate firebase-app-check-compat.js - be sure to load firebase-app.js first.")}});