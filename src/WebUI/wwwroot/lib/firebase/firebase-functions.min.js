import{_registerComponent as e,registerVersion as t,_getProvider,getApp as n}from"https://www.gstatic.com/firebasejs/10.6.0/firebase-app.js";const r={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const o=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let r=0;r<n.length;r+=3){var i=n[r],s=r+1<n.length,c=s?n[r+1]:0,u=r+2<n.length,l=u?n[r+2]:0;let e=(15&c)<<2|l>>6,t=63&l;u||(t=64,s||(e=64)),a.push(o[i>>2],o[(3&i)<<4|c>>4],o[e],o[t])}return a.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(function(r){const n=[];let o=0;for(let t=0;t<r.length;t++){let e=r.charCodeAt(t);e<128?n[o++]=e:(e<2048?n[o++]=e>>6|192:(55296==(64512&e)&&t+1<r.length&&56320==(64512&r.charCodeAt(t+1))?(e=65536+((1023&e)<<10)+(1023&r.charCodeAt(++t)),n[o++]=e>>18|240,n[o++]=e>>12&63|128):n[o++]=e>>12|224,n[o++]=e>>6&63|128),n[o++]=63&e|128)}return n}(e),t)},decodeString(r,n){if(this.HAS_NATIVE_SUPPORT&&!n)return atob(r);{var o=this.decodeStringToByteArray(r,n);const u=[];let e=0,t=0;for(;e<o.length;){var a,i,s,c=o[e++];c<128?u[t++]=String.fromCharCode(c):191<c&&c<224?(a=o[e++],u[t++]=String.fromCharCode((31&c)<<6|63&a)):239<c&&c<365?(a=((7&c)<<18|(63&o[e++])<<12|(63&o[e++])<<6|63&o[e++])-65536,u[t++]=String.fromCharCode(55296+(a>>10)),u[t++]=String.fromCharCode(56320+(1023&a))):(i=o[e++],s=o[e++],u[t++]=String.fromCharCode((15&c)<<12|(63&i)<<6|63&s))}return u.join("")}},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let e=0;e<t.length;){var o=r[t.charAt(e++)],a=e<t.length?r[t.charAt(e)]:0,i=++e<t.length?r[t.charAt(e)]:64,s=++e<t.length?r[t.charAt(e)]:64;if(++e,null==o||null==a||null==i||null==s)throw new DecodeBase64StringError;if(n.push(o<<2|a>>4),64!==i){const t=a<<4&240|i>>2;if(n.push(t),64!==s){const t=i<<6&192|s;n.push(t)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class DecodeBase64StringError extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const getDefaultsFromGlobal=()=>function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,getDefaultsFromCookie=()=>{if("undefined"!=typeof document){let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}var t=e&&function(e){try{return r.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(e[1]);return t&&JSON.parse(t)}},getDefaults=()=>{try{return getDefaultsFromGlobal()||(()=>{var e;if("undefined"!=typeof process&&void 0!==process.env)return e=process.env.__FIREBASE_DEFAULTS__,e?JSON.parse(e):void 0})()||getDefaultsFromCookie()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: "+e)}},getDefaultEmulatorHostnameAndPort=e=>{e=e;const t=null==(r=null==(r=getDefaults())?void 0:r.emulatorHosts)?void 0:r[e];if(t){var r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);e=parseInt(t.substring(r+1),10);return"["===t[0]?[t.substring(1,r-1),e]:[t.substring(0,r),e]}};class FirebaseError extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){var n,t=t[0]||{},r=this.service+"/"+e,e=this.errors[e],e=e?(n=t,e.replace(o,(e,t)=>{var r=n[t];return null!=r?String(r):`<${t}?>`})):"Error",e=this.serviceName+`: ${e} (${r}).`;return new FirebaseError(r,e,t)}}const o=/\{\$([^}]+)}/g;function getModularInstance(e){return e&&e._delegate?e._delegate:e}class Component{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}function mapValues(e,t){const r={};for(const n in e)e.hasOwnProperty(n)&&(r[n]=t(e[n]));return r}function encode(e){if(null==e)return null;if("number"==typeof(e=e instanceof Number?e.valueOf():e)&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(e=>encode(e));if("function"==typeof e||"object"==typeof e)return mapValues(e,e=>encode(e));throw new Error("Data cannot be encoded in JSON: "+e)}function decode(e){if(null==e)return e;if(e["@type"])switch(e["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t;default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(e=>decode(e)):"function"==typeof e||"object"==typeof e?mapValues(e,e=>decode(e)):e}const s={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class FunctionsError extends FirebaseError{constructor(e,t,r){super("functions/"+e,t||""),this.details=r}}class ContextProvider{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(e=>this.auth=e,()=>{}),this.messaging||t.get().then(e=>this.messaging=e,()=>{}),this.appCheck||r.get().then(e=>this.appCheck=e,()=>{})}async getAuthToken(){if(this.auth)try{var e=await this.auth.getToken();return null==e?void 0:e.accessToken}catch(e){return}}async getMessagingToken(){if(this.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return await this.messaging.getToken()}catch(e){return}}async getAppCheckToken(e){return!this.appCheck||(e=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken()).error?null:e.token}async getContext(e){return{authToken:await this.getAuthToken(),messagingToken:await this.getMessagingToken(),appCheckToken:await this.getAppCheckToken(e)}}}class FunctionsService{constructor(e,t,r,n,o="us-central1",a){this.app=e,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new ContextProvider(t,r,n),this.cancelAllRequests=new Promise(e=>{this.deleteService=()=>Promise.resolve(e())});try{const e=new URL(o);this.customDomain=e.origin,this.region="us-central1"}catch(e){this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){var t=this.app.options.projectId;return null!==this.emulatorOrigin?`${this.emulatorOrigin}/${t}/${this.region}/`+e:null!==this.customDomain?this.customDomain+"/"+e:`https://${this.region}-${t}.cloudfunctions.net/`+e}}function httpsCallable$1(o,a,i){return e=>{var t=o,r=a,n=i||{};return r=t._url(r),callAtURL(t,r,e,n)}}async function postJSON(e,t,r,n){let o;r["Content-Type"]="application/json";try{o=await n(e,{method:"POST",body:JSON.stringify(t),headers:r})}catch(e){return{status:0,json:null}}let a=null;try{a=await o.json()}catch(e){}return{status:o.status,json:a}}async function callAtURL(e,t,r,n){const o={data:r=encode(r)},a={},i=await e.contextProvider.getContext(n.limitedUseAppCheckTokens),c=(i.authToken&&(a.Authorization="Bearer "+i.authToken),i.messagingToken&&(a["Firebase-Instance-ID-Token"]=i.messagingToken),null!==i.appCheckToken&&(a["X-Firebase-AppCheck"]=i.appCheckToken),function(r){let n=null;return{promise:new Promise((e,t)=>{n=setTimeout(()=>{t(new FunctionsError("deadline-exceeded","deadline-exceeded"))},r)}),cancel:()=>{n&&clearTimeout(n)}}}(n.timeout||7e4)),u=await Promise.race([postJSON(t,o,a,e.fetchImpl),c.promise,e.cancelAllRequests]);if(c.cancel(),!u)throw new FunctionsError("cancelled","Firebase Functions instance was deleted.");r=function(e,t){let r,n=function(e){if(200<=e&&e<300)return"ok";switch(e){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),o=n;try{const e=t&&t.error;if(e){const t=e.status;if("string"==typeof t){if(!s[t])return new FunctionsError("internal","internal");n=s[t],o=t}var a=e.message;"string"==typeof a&&(o=a),void 0!==(r=e.details)&&(r=decode(r))}}catch(e){}return"ok"===n?null:new FunctionsError(n,o,r)}(u.status,u.json);if(r)throw r;if(!u.json)throw new FunctionsError("internal","Response is not valid JSON object.");let l=u.json.data;if(void 0===(l=void 0===l?u.json.result:l))throw new FunctionsError("internal","Response is missing data field.");return{data:decode(l)}}const i="@firebase/functions";function getFunctions(e=n(),t="us-central1"){e=_getProvider(getModularInstance(e),"functions").getImmediate({identifier:t}),t=getDefaultEmulatorHostnameAndPort("functions");return t&&connectFunctionsEmulator(e,...t),e}function connectFunctionsEmulator(e,t,r){getModularInstance(e).emulatorOrigin=`http://${t}:`+r}function httpsCallable(e,t,r){return httpsCallable$1(getModularInstance(e),t,r)}function httpsCallableFromURL(e,t,r){return n=getModularInstance(e),o=t,a=r,e=>callAtURL(n,o,e,a||{});var n,o,a}!function(a,r){e(new Component("functions",(e,{instanceIdentifier:t})=>{var r=e.getProvider("app").getImmediate(),n=e.getProvider("auth-internal"),o=e.getProvider("messaging-internal"),e=e.getProvider("app-check-internal");return new FunctionsService(r,n,o,e,t,a)},"PUBLIC").setMultipleInstances(!0)),t(i,"0.10.0",r),t(i,"0.10.0","esm2017")}(fetch.bind(self));export{connectFunctionsEmulator,getFunctions,httpsCallable,httpsCallableFromURL};