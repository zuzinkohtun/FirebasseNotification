!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("@firebase/app-compat"),require("@firebase/app")):"function"==typeof define&&define.amd?define(["@firebase/app-compat","@firebase/app"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).firebase,e.firebase.INTERNAL.modularAPIs)}(this,function(at,it){"use strict";try{!function(){var t,n,e=(e=at)&&"object"==typeof e&&"default"in e?e:{default:e};class a extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,a.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,i.prototype.create)}}class i{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){var n,t=t[0]||{},r=this.service+"/"+e,e=(e=this.errors[e])?(n=t,e.replace(B,(e,t)=>{var r=n[t];return null!=r?String(r):`<${t}?>`})):"Error",e=this.serviceName+`: ${e} (${r}).`;return new a(r,e,t)}}const B=/\{\$([^}]+)}/g;class r{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}t={DEBUG:0,0:"DEBUG",VERBOSE:1,1:"VERBOSE",INFO:2,2:"INFO",WARN:3,3:"WARN",ERROR:4,4:"ERROR",SILENT:5,5:"SILENT"};const j={debug:t.DEBUG,verbose:t.VERBOSE,info:t.INFO,warn:t.WARN,error:t.ERROR,silent:t.SILENT},U=t.INFO,F={[t.DEBUG]:"log",[t.VERBOSE]:"log",[t.INFO]:"info",[t.WARN]:"warn",[t.ERROR]:"error"},q=(e,t,...r)=>{if(!(t<e.logLevel)){var n=(new Date).toISOString(),a=F[t];if(!a)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[a](`[${n}]  ${e.name}:`,...r)}},H=(t,e)=>e.some(e=>t instanceof e);let $,V;const x=new WeakMap,o=new WeakMap,W=new WeakMap,s=new WeakMap,c=new WeakMap;let l={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return o.get(e);if("objectStoreNames"===t)return e.objectStoreNames||W.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return u(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function K(e){return"function"==typeof e?(r=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(V=V||[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey]).includes(r)?function(...e){return r.apply(d(this),e),u(x.get(this))}:function(...e){return u(r.apply(d(this),e))}:function(e,...t){t=r.call(d(this),e,...t);return W.set(t,e.sort?e.sort():[e]),u(t)}:(e instanceof IDBTransaction&&(i=e,o.has(i)||(t=new Promise((e,t)=>{const r=()=>{i.removeEventListener("complete",n),i.removeEventListener("error",a),i.removeEventListener("abort",a)},n=()=>{e(),r()},a=()=>{t(i.error||new DOMException("AbortError","AbortError")),r()};i.addEventListener("complete",n),i.addEventListener("error",a),i.addEventListener("abort",a)}),o.set(i,t))),H(e,$=$||[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])?new Proxy(e,l):e);var r,i,t}function u(e){if(e instanceof IDBRequest){var i=e;const r=new Promise((e,t)=>{const r=()=>{i.removeEventListener("success",n),i.removeEventListener("error",a)},n=()=>{e(u(i.result)),r()},a=()=>{t(i.error),r()};i.addEventListener("success",n),i.addEventListener("error",a)});return r.then(e=>{e instanceof IDBCursor&&x.set(e,i)}).catch(()=>{}),c.set(r,i),r}if(s.has(e))return s.get(e);var t=K(e);return t!==e&&(s.set(e,t),c.set(t,e)),t}const d=e=>c.get(e),z=["get","getKey","getAll","getAllKeys","count"],G=["put","add","delete","clear"],p=new Map;function J(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t){if(p.get(t))return p.get(t);const n=t.replace(/FromIndex$/,""),a=t!==n,i=G.includes(n);return n in(a?IDBIndex:IDBObjectStore).prototype&&(i||z.includes(n))?(e=async function(e,...t){e=this.transaction(e,i?"readwrite":"readonly");let r=e.store;return a&&(r=r.index(t.shift())),(await Promise.all([r[n](...t),i&&e.done]))[0]},p.set(t,e),e):void 0}}l={...n=l,get:(e,t,r)=>J(e,t)||n.get(e,t,r),has:(e,t)=>!!J(e,t)||n.has(e,t)};var g="@firebase/installations";const Y=1e4,Z="w:"+(T="0.6.4"),Q="FIS_v2",X="https://firebaseinstallations.googleapis.com/v1",ee=36e5,f=new i("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function te(e){return e instanceof a&&e.code.includes("request-failed")}function re({projectId:e}){return X+`/projects/${e}/installations`}function ne(e){return{token:e.token,requestStatus:2,expiresIn:(e=e.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()}}async function ae(e,t){t=(await t.json()).error;return f.create("request-failed",{requestName:e,serverCode:t.code,serverMessage:t.message,serverStatus:t.status})}function ie({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}async function oe(e){var t=await e();return 500<=t.status&&t.status<600?e():t}function se(t){return new Promise(e=>{setTimeout(e,t)})}const ce=/^[cdef][\w-]{21}$/,h="";function m(e){return e.appName+"!"+e.appId}const le=new Map;function ue(e,t){e=m(e);de(e,t);{!v&&"BroadcastChannel"in self&&((v=new BroadcastChannel("[Firebase] FID Change")).onmessage=e=>{de(e.data.key,e.data.fid)});const r=v;return r&&r.postMessage({key:e,fid:t}),void(0===le.size&&v&&(v.close(),v=null))}}function de(e,t){e=le.get(e);if(e)for(const r of e)r(t)}let v=null;const b="firebase-installations-store";let pe=null;function w(){return pe=pe||function({blocked:t,upgrade:r,blocking:n,terminated:a}){const i=indexedDB.open("firebase-installations-database",1),e=u(i);return r&&i.addEventListener("upgradeneeded",e=>{r(u(i.result),e.oldVersion,e.newVersion,u(i.transaction),e)}),t&&i.addEventListener("blocked",e=>t(e.oldVersion,e.newVersion,e)),e.then(e=>{a&&e.addEventListener("close",()=>a()),n&&e.addEventListener("versionchange",e=>n(e.oldVersion,e.newVersion,e))}).catch(()=>{}),e}({upgrade:(e,t)=>{0===t&&e.createObjectStore(b)}})}async function _(e,t){var r=m(e);const n=await w(),a=n.transaction(b,"readwrite"),i=a.objectStore(b);var o=await i.get(r);return await i.put(t,r),await a.done,o&&o.fid===t.fid||ue(e,t.fid),t}async function ge(e){e=m(e);const t=await w(),r=t.transaction(b,"readwrite");await r.objectStore(b).delete(e),await r.done}async function y(e,t){var r=m(e);const n=await w(),a=n.transaction(b,"readwrite"),i=a.objectStore(b);var o=await i.get(r),t=t(o);return void 0===t?await i.delete(r):await i.put(t,r),await a.done,!t||o&&o.fid===t.fid||ue(e,t.fid),t}async function E(t){let r;var e=await y(t.appConfig,e=>{e=he(e||{fid:function(){try{const t=new Uint8Array(17),r=self.crypto||self.msCrypto;r.getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){const e=function(){const e=btoa(String.fromCharCode(...t));return e.replace(/\+/g,"-").replace(/\//g,"_")}();return e.substr(0,22)}(t);return ce.test(e)?e:h}catch(e){return h}}(),registrationStatus:0}),e=function(e,t){if(0!==t.registrationStatus)return 1===t.registrationStatus?{installationEntry:t,registrationPromise:async function(e){let t=await fe(e.appConfig);for(;1===t.registrationStatus;)await se(100),t=await fe(e.appConfig);if(0!==t.registrationStatus)return t;var{installationEntry:r,registrationPromise:n}=await E(e);return n||r}(e)}:{installationEntry:t};if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(f.create("app-offline"))};t={fid:t.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:t,registrationPromise:async function(e,t){try{var r=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:r}){const n=re(e),a=ie(e),i=t.getImmediate({optional:!0});i&&(o=await i.getHeartbeatsHeader())&&a.append("x-firebase-client",o);var o={fid:r,authVersion:Q,appId:e.appId,sdkVersion:Z};const s={method:"POST",headers:a,body:JSON.stringify(o)},c=await oe(()=>fetch(n,s));if(c.ok)return{fid:(o=await c.json()).fid||r,registrationStatus:2,refreshToken:o.refreshToken,authToken:ne(o.authToken)};throw await ae("Create Installation",c)}(e,t);return _(e.appConfig,r)}catch(r){throw te(r)&&409===r.customData.serverCode?await ge(e.appConfig):await _(e.appConfig,{fid:t.fid,registrationStatus:0}),r}}(e,t)}}(t,e);return r=e.registrationPromise,e.installationEntry});return e.fid===h?{installationEntry:await r}:{installationEntry:e,registrationPromise:r}}function fe(e){return y(e,e=>{if(e)return he(e);throw f.create("installation-not-found")})}function he(e){return 1===e.registrationStatus&&e.registrationTime+Y<Date.now()?{fid:e.fid,registrationStatus:0}:e}async function me({appConfig:e,heartbeatServiceProvider:t},r){[a,i]=[e,r.fid];const n=re(a)+`/${i}/authTokens:generate`;var a,i;const o=function(e,{refreshToken:t}){const r=ie(e);return r.append("Authorization",Q+" "+t),r}(e,r),s=t.getImmediate({optional:!0});s&&(c=await s.getHeartbeatsHeader())&&o.append("x-firebase-client",c);var c={installation:{sdkVersion:Z,appId:e.appId}};const l={method:"POST",headers:o,body:JSON.stringify(c)},u=await oe(()=>fetch(n,l));if(u.ok)return ne(await u.json());throw await ae("Generate Auth Token",u)}async function ve(i,o=!1){let s;var e=await y(i.appConfig,e=>{if(!we(e))throw f.create("not-registered");var t,r,n,a=e.authToken;if(o||2!==(t=a).requestStatus||(r=t,(n=Date.now())<r.creationTime||r.creationTime+r.expiresIn<n+ee)){if(1===a.requestStatus)return s=async function(e,t){let r=await be(e.appConfig);for(;1===r.authToken.requestStatus;)await se(100),r=await be(e.appConfig);var n=r.authToken;return 0===n.requestStatus?ve(e,t):n}(i,o),e;if(navigator.onLine)return t=e,a={requestStatus:1,requestTime:Date.now()},a=Object.assign(Object.assign({},t),{authToken:a}),s=async function(e,t){try{var r=await me(e,t),n=Object.assign(Object.assign({},t),{authToken:r});return await _(e.appConfig,n),r}catch(n){throw!te(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode?(r=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}),await _(e.appConfig,r)):await ge(e.appConfig),n}}(i,a),a;throw f.create("app-offline")}return e});return s?await s:e.authToken}function be(e){return y(e,e=>{if(!we(e))throw f.create("not-registered");var t=e.authToken;return 1===t.requestStatus&&t.requestTime+Y<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function we(e){return void 0!==e&&2===e.registrationStatus}function _e(e){return f.create("missing-app-config-values",{valueName:e})}const ye="installations",Ee=(it._registerComponent(new r(ye,e=>{e=e.getProvider("app").getImmediate();return{app:e,appConfig:function(e){if(!e||!e.options)throw _e("App Configuration");if(!e.name)throw _e("App Name");for(const t of["projectId","apiKey","appId"])if(!e.options[t])throw _e(t);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(e),heartbeatServiceProvider:it._getProvider(e,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),it._registerComponent(new r("installations-internal",e=>{e=e.getProvider("app").getImmediate();const t=it._getProvider(e,ye).getImmediate();return{getId:()=>async function(e){const{installationEntry:t,registrationPromise:r}=await E(e);return(r||ve(e)).catch(console.error),t.fid}(t),getToken:e=>async function(e,t=!1){var r;return await((r=(await E(e)).registrationPromise)&&await r),(await ve(e,t)).token}(t,e)}},"PRIVATE")),it.registerVersion(g,T),it.registerVersion(g,T,"esm2017"),"@firebase/performance"),Ie="0.6.4",Te=Ie,Se="FB-PERF-TRACE-MEASURE",ke="@firebase/performance/config",Ne="@firebase/performance/configexpire";var I,T="Performance";const S=new i("performance",T,{"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."}),k=new class{constructor(e){this.name=e,this._logLevel=U,this._logHandler=q,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in t))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?j[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,t.DEBUG,...e),this._logHandler(this,t.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,t.VERBOSE,...e),this._logHandler(this,t.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,t.INFO,...e),this._logHandler(this,t.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,t.WARN,...e),this._logHandler(this,t.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,t.ERROR,...e),this._logHandler(this,t.ERROR,...e)}}(T);k.logLevel=t.INFO;let Ce,Re;class N{constructor(e){if(!(this.window=e))throw S.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){this.performance&&this.performance.mark&&this.performance.mark(e)}measure(e,t,r){this.performance&&this.performance.measure&&this.performance.measure(e,t,r)}getEntriesByType(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]}getEntriesByName(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return fetch&&Promise&&"undefined"!=typeof navigator&&navigator.cookieEnabled?!!function(){try{return"object"==typeof indexedDB}catch(e){return}}()||(k.info("IndexedDB is not supported by current browser"),!1):(k.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)}setupObserver(e,r){if(this.PerformanceObserver){const t=new this.PerformanceObserver(e=>{for(const t of e.getEntries())r(t)});t.observe({entryTypes:[e]})}}static getInstance(){return Ce=void 0===Ce?new N(Re):Ce}}let C;function Ae(t,r){var e=t.length-r.length;if(e<0||1<e)throw S.create("invalid String merger input");const n=[];for(let e=0;e<t.length;e++)n.push(t.charAt(e)),r.length>e&&n.push(r.charAt(e));return n.join("")}let Oe;class R{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=Ae("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=Ae("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return Oe=void 0===Oe?new R:Oe}}I={UNKNOWN:0,0:"UNKNOWN",VISIBLE:1,1:"VISIBLE",HIDDEN:2,2:"HIDDEN"};const Me=["firebase_","google_","ga_"],Pe=new RegExp("^[a-zA-Z]\\w*$");function Le(){switch(N.getInstance().document.visibilityState){case"visible":return I.VISIBLE;case"hidden":return I.HIDDEN;default:return I.UNKNOWN}}function De(e){e=null==(e=e.options)?void 0:e.appId;if(e)return e;throw S.create("no app id")}const Be="0.0.1",A={loggingEnabled:!0},je="FIREBASE_INSTALLATIONS_AUTH";function Ue(t,e){var n,a,r=function(){const e=N.getInstance().localStorage;if(e){var t=e.getItem(Ne);if(t&&Number(t)>Date.now()&&(t=e.getItem(ke)))try{return JSON.parse(t)}catch(e){return}}}();return r?(qe(r),Promise.resolve()):(a=e,function(){const e=(n=t).installations.getToken();return e.then(e=>{}),e}().then(e=>{var t=function(){var e=null==(e=n.app.options)?void 0:e.projectId;if(e)return e;throw S.create("no project id")}(),r=function(){var e=null==(e=n.app.options)?void 0:e.apiKey;if(e)return e;throw S.create("no api key")}(),r=new Request(`https://firebaseremoteconfig.googleapis.com/v1/projects/${t}/namespaces/fireperf:fetch?key=`+r,{method:"POST",headers:{Authorization:je+" "+e},body:JSON.stringify({app_instance_id:a,app_instance_id_token:e,app_id:De(n.app),app_version:Te,sdk_version:Be})});return fetch(r).then(e=>{if(e.ok)return e.json();throw S.create("RC response not ok")})}).catch(()=>{k.info(Fe)}).then(qe).then(e=>{{const t=N.getInstance().localStorage;return void(e&&t&&(t.setItem(ke,JSON.stringify(e)),t.setItem(Ne,String(Date.now()+60*R.getInstance().configTimeToLive*60*1e3))))}},()=>{}))}const Fe="Could not fetch config, will use default configs";function qe(e){if(!e)return e;const t=R.getInstance();var r=e.entries||{};return void 0!==r.fpr_enabled?t.loggingEnabled="true"===String(r.fpr_enabled):t.loggingEnabled=A.loggingEnabled,r.fpr_log_source?t.logSource=Number(r.fpr_log_source):A.logSource&&(t.logSource=A.logSource),r.fpr_log_endpoint_url?t.logEndPointUrl=r.fpr_log_endpoint_url:A.logEndPointUrl&&(t.logEndPointUrl=A.logEndPointUrl),r.fpr_log_transport_key?t.transportKey=r.fpr_log_transport_key:A.transportKey&&(t.transportKey=A.transportKey),void 0!==r.fpr_vc_network_request_sampling_rate?t.networkRequestsSamplingRate=Number(r.fpr_vc_network_request_sampling_rate):void 0!==A.networkRequestsSamplingRate&&(t.networkRequestsSamplingRate=A.networkRequestsSamplingRate),void 0!==r.fpr_vc_trace_sampling_rate?t.tracesSamplingRate=Number(r.fpr_vc_trace_sampling_rate):void 0!==A.tracesSamplingRate&&(t.tracesSamplingRate=A.tracesSamplingRate),t.logTraceAfterSampling=He(t.tracesSamplingRate),t.logNetworkAfterSampling=He(t.networkRequestsSamplingRate),e}function He(e){return Math.random()<=e}let $e=1,Ve;function xe(e){var t;return $e=2,Ve=Ve||(t=e,function(){const r=N.getInstance().document;return new Promise(e=>{if(r&&"complete"!==r.readyState){const t=()=>{"complete"===r.readyState&&(r.removeEventListener("readystatechange",t),e())};r.addEventListener("readystatechange",t)}else e()})}().then(()=>{{const e=t.installations.getId();return e.then(e=>{C=e}),e}}).then(e=>Ue(t,e)).then(()=>We(),()=>We()))}function We(){$e=3}let O=3,M=[],Ke=!1;function P(e){setTimeout(()=>{if(0!==O)if(M.length){const r=M.splice(0,1e3),a=r.map(e=>({source_extension_json_proto3:e.message,event_time_ms:String(e.eventTime)})),i={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:R.getInstance().logSource,log_event:a};var e,n,t;e=i,n=r,e=i,t=R.getInstance().getFlTransportFullUrl(),fetch(t,{method:"POST",body:JSON.stringify(e)}).then(e=>(e.ok||k.info("Call to Firebase backend failed."),e.json())).then(e=>{var t=Number(e.nextRequestWaitMillis);let r=1e4;isNaN(t)||(r=Math.max(t,r)),t=e.logResponseDetails,Array.isArray(t)&&0<t.length&&"RETRY_REQUEST_LATER"===t[0].responseAction&&(M=[...n,...M],k.info("Retry transport request later.")),O=3,P(r)}).catch(()=>{M=[...r,...M],O--,k.info(`Tries left: ${O}.`),P(1e4)});return}else return P(1e4)},e)}let ze;function Ge(e,t){var r;(ze=ze||(r=Ye,(...e)=>{e={message:r(...e),eventTime:Date.now()};if(!e.eventTime||!e.message)throw S.create("invalid cc log");M=[...M,e]}))(e,t)}function L(e){var t=R.getInstance();!t.instrumentationEnabled&&e.isAuto||!t.dataCollectionEnabled&&!e.isAuto||!N.getInstance().requiredApisAvailable()||e.isAuto&&Le()!==I.VISIBLE||(3===$e?Je(e):xe(e.performanceController).then(()=>Je(e),()=>Je(e)))}function Je(e){var t;C&&(t=R.getInstance()).loggingEnabled&&t.logTraceAfterSampling&&setTimeout(()=>Ge(e,1),0)}function Ye(e,t){if(0===t)return t={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},t={application_info:Ze(e.performanceController.app),network_request_metric:t},JSON.stringify(t);{t=e;const r={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(r.counters=t.counters);e=t.getAttributes();return 0!==Object.keys(e).length&&(r.custom_attributes=e),e={application_info:Ze(t.performanceController.app),trace_metric:r},JSON.stringify(e)}}function Ze(e){return{google_app_id:De(e),app_instance_id:C,web_app_info:{sdk_version:Te,page_url:N.getInstance().getUrl(),service_worker_status:null!=(e=N.getInstance().navigator)&&e.serviceWorker?e.serviceWorker.controller?2:3:1,visibility_state:Le(),effective_connection_type:function(){var e=N.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0}}const Qe=["_fp","_fcp","_fid"];class D{constructor(e,t,r=!1,n){this.performanceController=e,this.name=t,this.isAuto=r,this.state=1,this.customAttributes={},this.counters={},this.api=N.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark=`FB-PERF-TRACE-START-${this.randomId}-`+this.name,this.traceStopMark=`FB-PERF-TRACE-STOP-${this.randomId}-`+this.name,this.traceMeasure=n||`${Se}-${this.randomId}-`+this.name,n&&this.calculateTraceMetrics())}start(){if(1!==this.state)throw S.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(2!==this.state)throw S.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),L(this)}record(e,t,r){if(e<=0)throw S.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw S.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),r&&r.attributes&&(this.customAttributes=Object.assign({},r.attributes)),r&&r.metrics)for(const n of Object.keys(r.metrics))isNaN(Number(r.metrics[n]))||(this.counters[n]=Math.floor(Number(r.metrics[n])));L(this)}incrementMetric(e,t=1){void 0===this.counters[e]?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)}putMetric(e,t){if(n=this.name,0===(r=e).length||100<r.length||!(n&&n.startsWith("_wt_")&&-1<Qe.indexOf(r))&&r.startsWith("_"))throw S.create("invalid custom metric name",{customMetricName:e});var r,n;this.counters[e]=(t=null!=t?t:0,(n=Math.floor(t))<t&&k.info(`Metric value should be an Integer, setting the value as : ${n}.`),n)}getMetric(e){return this.counters[e]||0}putAttribute(e,t){var r,n=!(0===(r=e).length||40<r.length||Me.some(e=>r.startsWith(e))||!r.match(Pe)),a=0!==t.length&&t.length<=100;if(n&&a)this.customAttributes[e]=t;else{if(!n)throw S.create("invalid attribute name",{attributeName:e});if(!a)throw S.create("invalid attribute value",{attributeValue:t})}}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){var e=this.api.getEntriesByName(this.traceMeasure);(e=e&&e[0])&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))}static createOobTrace(e,t,r,n){var a=N.getInstance().getUrl();if(a){const i=new D(e,"_wt_"+a,!0);a=Math.floor(1e3*N.getInstance().getTimeOrigin()),i.setStartTime(a),t&&t[0]&&(i.setDuration(Math.floor(1e3*t[0].duration)),i.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),i.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),i.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),r&&((a=r.find(e=>"first-paint"===e.name))&&a.startTime&&i.putMetric("_fp",Math.floor(1e3*a.startTime)),(a=r.find(e=>"first-contentful-paint"===e.name))&&a.startTime&&i.putMetric("_fcp",Math.floor(1e3*a.startTime)),n&&i.putMetric("_fid",Math.floor(1e3*n))),L(i)}}static createUserTimingTrace(e,t){L(new D(e,t,!1,t))}}function Xe(e,t){const r=t;var n,a;if(r&&void 0!==r.responseStart){t=N.getInstance().getTimeOrigin(),n=Math.floor(1e3*(r.startTime+t)),a=r.responseStart?Math.floor(1e3*(r.responseStart-r.startTime)):void 0,t=Math.floor(1e3*(r.responseEnd-r.startTime));{var i={performanceController:e,url:r.name&&r.name.split("?")[0],responsePayloadBytes:r.transferSize,startTimeUs:n,timeToResponseInitiatedUs:a,timeToResponseCompletedUs:t};const o=R.getInstance();o.instrumentationEnabled&&(e=i.url,n=o.logEndPointUrl.split("?")[0],a=o.flTransportEndpointUrl.split("?")[0],e!==n&&e!==a&&o.loggingEnabled&&o.logNetworkAfterSampling&&setTimeout(()=>Ge(i,0),0))}}}function et(i){C&&(setTimeout(()=>{{var r=i;const e=N.getInstance(),n=e.getEntriesByType("navigation"),a=e.getEntriesByType("paint");if(e.onFirstInputDelay){let t=setTimeout(()=>{D.createOobTrace(r,n,a),t=void 0},5e3);e.onFirstInputDelay(e=>{t&&(clearTimeout(t),D.createOobTrace(r,n,a,e))})}else D.createOobTrace(r,n,a);return}},0),setTimeout(()=>{{var t=i;const e=N.getInstance(),r=e.getEntriesByType("resource");for(const n of r)Xe(t,n);return void e.setupObserver("resource",e=>Xe(t,e))}},0),setTimeout(()=>{{var t=i;const e=N.getInstance(),r=e.getEntriesByType("measure");for(const n of r)tt(t,n);return void e.setupObserver("measure",e=>tt(t,e))}},0))}function tt(e,t){const r=t.name;r.substring(0,Se.length)!==Se&&D.createUserTimingTrace(e,r)}class rt{constructor(e,t){this.app=e,this.installations=t,this.initialized=!1}_init(e){this.initialized||(void 0!==(null==e?void 0:e.dataCollectionEnabled)&&(this.dataCollectionEnabled=e.dataCollectionEnabled),void 0!==(null==e?void 0:e.instrumentationEnabled)&&(this.instrumentationEnabled=e.instrumentationEnabled),N.getInstance().requiredApisAvailable()?new Promise((t,r)=>{try{let e=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),e||self.indexedDB.deleteDatabase(n),t(!0)},a.onupgradeneeded=()=>{e=!1},a.onerror=()=>{var e;r((null==(e=a.error)?void 0:e.message)||"")}}catch(e){r(e)}}).then(e=>{e&&(Ke||(P(5500),Ke=!0),xe(this).then(()=>et(this),()=>et(this)),this.initialized=!0)}).catch(e=>{k.info("Environment doesn't support IndexedDB: "+e)}):k.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){R.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return R.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){R.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return R.getInstance().dataCollectionEnabled}}it._registerComponent(new r("performance",(e,{options:t})=>{var r=e.getProvider("app").getImmediate(),n=e.getProvider("installations-internal").getImmediate();if("[DEFAULT]"!==r.name)throw S.create("FB not default");if("undefined"==typeof window)throw S.create("no window");e=window,Re=e;const a=new rt(r,n);return a._init(t),a},"PUBLIC")),it.registerVersion(Ee,Ie),it.registerVersion(Ee,Ie,"esm2017");class nt{constructor(e,t){this.app=e,this._delegate=t}get instrumentationEnabled(){return this._delegate.instrumentationEnabled}set instrumentationEnabled(e){this._delegate.instrumentationEnabled=e}get dataCollectionEnabled(){return this._delegate.dataCollectionEnabled}set dataCollectionEnabled(e){this._delegate.dataCollectionEnabled=e}trace(e){return t=e,e=(e=this._delegate)&&e._delegate?e._delegate:e,new D(e,t);var t}}(g=e.default).INTERNAL.registerComponent(new r("performance-compat",function(e){var t=e.getProvider("app-compat").getImmediate(),e=e.getProvider("performance").getImmediate();return new nt(t,e)},"PUBLIC")),g.registerVersion("@firebase/performance-compat","0.2.4")}.apply(this,arguments)}catch(e){throw console.error(e),new Error("Cannot instantiate firebase-performance-compat.js - be sure to load firebase-app.js first.")}});