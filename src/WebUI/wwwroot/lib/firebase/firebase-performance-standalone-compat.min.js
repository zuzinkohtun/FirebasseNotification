!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).firebase=t()}(this,function(){"use strict";var R=function(e,t){return(R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function j(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}R(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var f=function(){return(f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function h(e,a,s,c){return new(s=s||Promise)(function(n,t){function r(e){try{o(c.next(e))}catch(e){t(e)}}function i(e){try{o(c.throw(e))}catch(e){t(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(r,i)}o((c=c.apply(e,a||[])).next())})}function d(r,i){var o,a,s,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(n){return function(e){var t=[n,e];if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,a&&(s=2&t[0]?a.return:t[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,t[1])).done)return s;switch(a=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return c.label++,{value:t[1],done:!1};case 5:c.label++,a=t[1],t=[0];continue;case 7:t=c.ops.pop(),c.trys.pop();continue;default:if(!(s=0<(s=c.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){c=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){c.label=t[1];break}if(6===t[0]&&c.label<s[1]){c.label=s[1],s=t;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(t);break}s[2]&&c.ops.pop(),c.trys.pop();continue}t=i.call(r,c)}catch(e){t=[6,e],a=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function a(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||((r=r||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var F,x=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:(55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128):t[n++]=i>>12|224,t[n++]=i>>6&63|128),t[n++]=63&i|128)}return t},U={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,c=i+2<e.length,u=(15&s)<<2|(l=c?e[i+2]:0)>>6,l=63&l;c||(l=64,a||(u=64)),r.push(n[o>>2],n[(3&o)<<4|s>>4],n[u],n[l])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(x(e),t)},decodeString:function(e,t){if(this.HAS_NATIVE_SUPPORT&&!t)return atob(e);for(var n=this.decodeStringToByteArray(e,t),r=[],i=0,o=0;i<n.length;){var a,s,c,u=n[i++];u<128?r[o++]=String.fromCharCode(u):191<u&&u<224?(s=n[i++],r[o++]=String.fromCharCode((31&u)<<6|63&s)):239<u&&u<365?(a=((7&u)<<18|(63&(s=n[i++]))<<12|(63&(c=n[i++]))<<6|63&n[i++])-65536,r[o++]=String.fromCharCode(55296+(a>>10)),r[o++]=String.fromCharCode(56320+(1023&a))):(s=n[i++],c=n[i++],r[o++]=String.fromCharCode((15&u)<<12|(63&s)<<6|63&c))}return r.join("")},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,c=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==c)throw new V;r.push(o<<2|a>>4),64!==s&&(r.push(a<<4&240|s>>2),64!==c&&r.push(s<<6&192|c))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},V=(j(H,F=Error),H);function H(){var e=null!==F&&F.apply(this,arguments)||this;return e.name="DecodeBase64StringError",e}function z(e){return e=x(e),U.encodeByteArray(e,!0).replace(/\./g,"")}function q(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=q(e[n],t[n]));return e}function W(){try{return function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||function(){var e;if("undefined"!=typeof process&&void 0!==process.env)return(e=process.env.__FIREBASE_DEFAULTS__)?JSON.parse(e):void 0}()||function(){if("undefined"!=typeof document){try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}var e=e&&function(e){try{return U.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(e[1]);return e&&JSON.parse(e)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}}function $(){var e;return null==(e=W())?void 0:e.config}J.prototype.wrapCallback=function(n){var r=this;return function(e,t){e?r.reject(e):r.resolve(t),"function"==typeof n&&(r.promise.catch(function(){}),1===n.length?n(e):n(e,t))}};var K=J;function J(){var n=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,t){n.resolve=e,n.reject=t})}function G(){try{return"object"==typeof indexedDB}catch(e){return}}function Y(){return new Promise(function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null==(e=i.error)?void 0:e.message)||"")}}catch(e){t(e)}})}j(Q,X=Error);var X,Z=Q;function Q(e,t,n){t=X.call(this,t)||this;return t.code=e,t.customData=n,t.name="FirebaseError",Object.setPrototypeOf(t,Q.prototype),Error.captureStackTrace&&Error.captureStackTrace(t,r.prototype.create),t}ee.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r,i=t[0]||{},o="".concat(this.service,"/").concat(e),e=(e=this.errors[e])?(r=i,e.replace(te,function(e,t){var n=r[t];return null!=n?String(n):"<".concat(t,"?>")})):"Error",e="".concat(this.serviceName,": ").concat(e," (").concat(o,").");return new Z(o,e,i)};var r=ee;function ee(e,t,n){this.service=e,this.serviceName=t,this.errors=n}var te=/\{\$([^}]+)}/g;function ne(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function re(e,t){if(e===t)return 1;for(var n=Object.keys(e),r=Object.keys(t),i=0,o=n;i<o.length;i++){var a=o[i];if(!r.includes(a))return;var s=e[a],c=t[a];if(ie(s)&&ie(c)){if(!re(s,c))return}else if(s!==c)return}for(var u=0,l=r;u<l.length;u++)if(a=l[u],!n.includes(a))return;return 1}function ie(e){return null!==e&&"object"==typeof e}function oe(e,t){e=new ae(e,t);return e.subscribe.bind(e)}e.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},e.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},e.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e){if("object"==typeof e&&null!==e)for(var t=0,n=["next","error","complete"];t<n.length;t++){var r=n[t];if(r in e&&"function"==typeof e[r])return 1}}(e)?e:{next:e,error:t,complete:n}).next&&(r.next=se),void 0===r.error&&(r.error=se),void 0===r.complete&&(r.complete=se);e=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}}),this.observers.push(r),e},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],--this.observerCount,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))};var ae=e;function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){e(n)}).catch(function(e){n.error(e)})}function se(){}ce.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},ce.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},ce.prototype.setServiceProps=function(e){return this.serviceProps=e,this},ce.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this};var o=ce;function ce(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}var l="[DEFAULT]",ue=(t.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new K;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise},t.prototype.getImmediate=function(e){var t=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),n=null!=(n=null==e?void 0:e.optional)&&n;if(!this.isInitialized(t)&&!this.shouldAutoInitialize()){if(n)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:t})}catch(e){if(n)return null;throw e}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if("EAGER"===e.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:l})}catch(e){}try{for(var r=p(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=g(i.value,2),a=o[0],s=o[1],c=this.normalizeInstanceIdentifier(a);try{var u=this.getOrInitializeService({instanceIdentifier:c});s.resolve(u)}catch(e){}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}}},t.prototype.clearInstance=function(e){this.instancesDeferred.delete(e=void 0===e?l:e),this.instancesOptions.delete(e),this.instances.delete(e)},t.prototype.delete=function(){return h(this,void 0,void 0,function(){var t;return d(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(a(a([],g(t.filter(function(e){return"INTERNAL"in e}).map(function(e){return e.INTERNAL.delete()})),!1),g(t.filter(function(e){return"_delete"in e}).map(function(e){return e._delete()})),!1))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(e){return this.instances.has(e=void 0===e?l:e)},t.prototype.getOptions=function(e){return this.instancesOptions.get(e=void 0===e?l:e)||{}},t.prototype.initialize=function(e){var t,n,r=void 0===(r=(e=void 0===e?{}:e).options)?{}:r,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error("".concat(this.name,"(").concat(i,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var o=this.getOrInitializeService({instanceIdentifier:i,options:r});try{for(var a=p(this.instancesDeferred.entries()),s=a.next();!s.done;s=a.next()){var c=g(s.value,2),u=c[0],l=c[1];i===this.normalizeInstanceIdentifier(u)&&l.resolve(o)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return o},t.prototype.onInit=function(e,t){var t=this.normalizeInstanceIdentifier(t),n=null!=(r=this.onInitCallbacks.get(t))?r:new Set,r=(n.add(e),this.onInitCallbacks.set(t,n),this.instances.get(t));return r&&e(r,t),function(){n.delete(e)}},t.prototype.invokeOnInitCallbacks=function(e,t){var n,r,i=this.onInitCallbacks.get(t);if(i)try{for(var o=p(i),a=o.next();!a.done;a=o.next()){var s=a.value;try{s(e,t)}catch(e){}}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(e){var t=e.instanceIdentifier,n=e.options,r=void 0===n?{}:n;if(!(n=this.instances.get(t))&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(e=t)===l?void 0:e,options:r}),this.instances.set(t,n),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(e){}return n||null},t.prototype.normalizeInstanceIdentifier=function(e){return void 0===e&&(e=l),!this.component||this.component.multipleInstances?e:l},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t);function t(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}fe.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)},fe.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},fe.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new ue(e,this);return this.providers.set(e,t),t},fe.prototype.getProviders=function(){return Array.from(this.providers.values())};var le=fe;function fe(e){this.name=e,this.providers=new Map}var s,pe=[];function he(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var i=(new Date).toISOString(),o=ve[t];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));console[o].apply(console,a(["[".concat(i,"]  ").concat(e.name,":")],n,!1))}}s={DEBUG:0,0:"DEBUG",VERBOSE:1,1:"VERBOSE",INFO:2,2:"INFO",WARN:3,3:"WARN",ERROR:4,4:"ERROR",SILENT:5,5:"SILENT"};var de,ge={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},me=s.INFO,ve=((E={})[s.DEBUG]="log",E[s.VERBOSE]="log",E[s.INFO]="info",E[s.WARN]="warn",E[s.ERROR]="error",E),be=(Object.defineProperty(n.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in s))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e},enumerable:!1,configurable:!0}),n.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?ge[e]:e},Object.defineProperty(n.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),n.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,a([this,s.DEBUG],e,!1)),this._logHandler.apply(this,a([this,s.DEBUG],e,!1))},n.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,a([this,s.VERBOSE],e,!1)),this._logHandler.apply(this,a([this,s.VERBOSE],e,!1))},n.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,a([this,s.INFO],e,!1)),this._logHandler.apply(this,a([this,s.INFO],e,!1))},n.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,a([this,s.WARN],e,!1)),this._logHandler.apply(this,a([this,s.WARN],e,!1))},n.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,a([this,s.ERROR],e,!1)),this._logHandler.apply(this,a([this,s.ERROR],e,!1))},n);function n(e){this.name=e,this._logLevel=me,this._logHandler=he,this._userLogHandler=null,pe.push(this)}const ye=(t,e)=>e.some(e=>t instanceof e);let _e,we;const Ee=new WeakMap,Ie=new WeakMap,Se=new WeakMap,Te=new WeakMap,Ce=new WeakMap;let Ae={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ie.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Se.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return c(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Oe(e){return"function"==typeof e?(n=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(we=we||[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey]).includes(n)?function(...e){return n.apply(De(this),e),c(Ee.get(this))}:function(...e){return c(n.apply(De(this),e))}:function(e,...t){t=n.call(De(this),e,...t);return Se.set(t,e.sort?e.sort():[e]),c(t)}:(e instanceof IDBTransaction&&(o=e,Ie.has(o)||(t=new Promise((e,t)=>{const n=()=>{o.removeEventListener("complete",r),o.removeEventListener("error",i),o.removeEventListener("abort",i)},r=()=>{e(),n()},i=()=>{t(o.error||new DOMException("AbortError","AbortError")),n()};o.addEventListener("complete",r),o.addEventListener("error",i),o.addEventListener("abort",i)}),Ie.set(o,t))),ye(e,_e=_e||[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])?new Proxy(e,Ae):e);var n,o,t}function c(e){if(e instanceof IDBRequest){var o=e;const n=new Promise((e,t)=>{const n=()=>{o.removeEventListener("success",r),o.removeEventListener("error",i)},r=()=>{e(c(o.result)),n()},i=()=>{t(o.error),n()};o.addEventListener("success",r),o.addEventListener("error",i)});return n.then(e=>{e instanceof IDBCursor&&Ee.set(e,o)}).catch(()=>{}),Ce.set(n,o),n}if(Te.has(e))return Te.get(e);var t=Oe(e);return t!==e&&(Te.set(e,t),Ce.set(t,e)),t}const De=e=>Ce.get(e);function Ne(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const a=indexedDB.open(e,t),s=c(a);return r&&a.addEventListener("upgradeneeded",e=>{r(c(a.result),e.oldVersion,e.newVersion,c(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{o&&e.addEventListener("close",()=>o()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}const Pe=["get","getKey","getAll","getAllKeys","count"],ke=["put","add","delete","clear"],Me=new Map;function Le(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t){if(Me.get(t))return Me.get(t);const r=t.replace(/FromIndex$/,""),i=t!==r,o=ke.includes(r);return r in(i?IDBIndex:IDBObjectStore).prototype&&(o||Pe.includes(r))?(e=async function(e,...t){e=this.transaction(e,o?"readwrite":"readonly");let n=e.store;return i&&(n=n.index(t.shift())),(await Promise.all([n[r](...t),o&&e.done]))[0]},Me.set(t,e),e):void 0}}Ae={...de=Ae,get:(e,t,n)=>Le(e,t)||de.get(e,t,n),has:(e,t)=>!!Le(e,t)||de.has(e,t)};Re.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(e){if("VERSION"!==(null==(t=e.getComponent())?void 0:t.type))return null;var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}).filter(function(e){return e}).join(" ")};var Be=Re;function Re(e){this.container=e}var i="@firebase/app",je=new be("@firebase/app"),m="[DEFAULT]",Fe=((I={})[i]="fire-core",I["@firebase/app-compat"]="fire-core-compat",I["@firebase/analytics"]="fire-analytics",I["@firebase/analytics-compat"]="fire-analytics-compat",I["@firebase/app-check"]="fire-app-check",I["@firebase/app-check-compat"]="fire-app-check-compat",I["@firebase/auth"]="fire-auth",I["@firebase/auth-compat"]="fire-auth-compat",I["@firebase/database"]="fire-rtdb",I["@firebase/database-compat"]="fire-rtdb-compat",I["@firebase/functions"]="fire-fn",I["@firebase/functions-compat"]="fire-fn-compat",I["@firebase/installations"]="fire-iid",I["@firebase/installations-compat"]="fire-iid-compat",I["@firebase/messaging"]="fire-fcm",I["@firebase/messaging-compat"]="fire-fcm-compat",I["@firebase/performance"]="fire-perf",I["@firebase/performance-compat"]="fire-perf-compat",I["@firebase/remote-config"]="fire-rc",I["@firebase/remote-config-compat"]="fire-rc-compat",I["@firebase/storage"]="fire-gcs",I["@firebase/storage-compat"]="fire-gcs-compat",I["@firebase/firestore"]="fire-fst",I["@firebase/firestore-compat"]="fire-fst-compat",I["fire-js"]="fire-js",I.firebase="fire-js-all",I),v=new Map,xe=new Map;function Ue(t,n){try{t.container.addComponent(n)}catch(e){je.debug("Component ".concat(n.name," failed to register with FirebaseApp ").concat(t.name),e)}}function Ve(e,t){e.container.addOrOverwriteComponent(t)}function u(e){var t,n,r=e.name;if(xe.has(r))return je.debug("There were multiple attempts to register component ".concat(r,".")),!1;xe.set(r,e);try{for(var i=p(v.values()),o=i.next();!o.done;o=i.next())Ue(o.value,e)}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return!0}function He(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}var b=new r("app","Firebase",I=E={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."}),ze=(Object.defineProperty(y.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"name",{get:function(){return this.checkDestroyed(),this._name},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"options",{get:function(){return this.checkDestroyed(),this._options},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"config",{get:function(){return this.checkDestroyed(),this._config},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"isDeleted",{get:function(){return this._isDeleted},set:function(e){this._isDeleted=e},enumerable:!1,configurable:!0}),y.prototype.checkDestroyed=function(){if(this.isDeleted)throw b.create("app-deleted",{appName:this._name})},y);function y(e,t,n){var r=this;this._isDeleted=!1,this._options=f({},e),this._config=f({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new o("app",function(){return r},"PUBLIC"))}function qe(e,t){var n,r,i=e,t=f({name:m,automaticDataCollectionEnabled:!1},t="object"!=typeof(t=void 0===t?{}:t)?{name:t}:t),o=t.name;if("string"!=typeof o||!o)throw b.create("bad-app-name",{appName:String(o)});if(!(i=i||$()))throw b.create("no-options");var a=v.get(o);if(a){if(re(i,a.options)&&re(t,a.config))return a;throw b.create("duplicate-app",{appName:o})}var s=new le(o);try{for(var c=p(xe.values()),u=c.next();!u.done;u=c.next()){var l=u.value;s.addComponent(l)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return t=new ze(i,t,s),v.set(o,t),t}function We(n){return h(this,void 0,void 0,function(){var t;return d(this,function(e){switch(e.label){case 0:return t=n.name,v.has(t)?(v.delete(t),[4,Promise.all(n.container.getProviders().map(function(e){return e.delete()}))]):[3,2];case 1:e.sent(),n.isDeleted=!0,e.label=2;case 2:return[2]}})})}function _(e,t,n){var r,i=null!=(r=Fe[e])?r:e,e=(n&&(i+="-".concat(n)),i.match(/\s|\//)),n=t.match(/\s|\//);if(e||n)return r=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')],e&&r.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),e&&n&&r.push("and"),n&&r.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void je.warn(r.join(" "));u(new o("".concat(i,"-version"),function(){return{library:i,version:t}},"VERSION"))}function $e(e,t){if(null!==e&&"function"!=typeof e)throw b.create("invalid-log-argument");for(var a=e,n=t,r=0,i=pe;r<i.length;r++)!function(e){var o=null;n&&n.level&&(o=ge[n.level]),e.userLogHandler=null===a?null:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.map(function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}}).filter(function(e){return e}).join(" ");t>=(null!=o?o:e.logLevel)&&a({level:s[t].toLowerCase(),message:i,args:n,type:e.name})}}(i[r])}function Ke(e){var t=e;pe.forEach(function(e){e.setLogLevel(t)})}var Je="firebase-heartbeat-store",Ge=null;function Ye(){return Ge=Ge||Ne("firebase-heartbeat-database",1,{upgrade:function(e,t){0===t&&e.createObjectStore(Je)}}).catch(function(e){throw b.create("idb-open",{originalErrorMessage:e.message})})}function Xe(r,i){return h(this,void 0,void 0,function(){var t,n;return d(this,function(e){switch(e.label){case 0:return e.trys.push([0,4,,5]),[4,Ye()];case 1:return n=e.sent(),[4,(t=n.transaction(Je,"readwrite")).objectStore(Je).put(i,Ze(r))];case 2:return e.sent(),[4,t.done];case 3:return e.sent(),[3,5];case 4:return(n=e.sent())instanceof Z||(n=b.create("idb-set",{originalErrorMessage:null==n?void 0:n.message})),je.warn(n.message),[3,5];case 5:return[2]}})})}function Ze(e){return"".concat(e.name,"!").concat(e.options.appId)}et.prototype.triggerHeartbeat=function(){var i;return h(this,void 0,void 0,function(){var t,n,r;return d(this,function(e){switch(e.label){case 0:return t=(t=this.container.getProvider("platform-logger").getImmediate()).getPlatformInfoString(),n=tt(),null!=(null==(i=this._heartbeatsCache)?void 0:i.heartbeats)?[3,2]:[4,(r=this)._heartbeatsCachePromise];case 1:r._heartbeatsCache=e.sent(),e.label=2;case 2:return this._heartbeatsCache.lastSentHeartbeatDate===n||this._heartbeatsCache.heartbeats.some(function(e){return e.date===n})?[2]:(this._heartbeatsCache.heartbeats.push({date:n,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(function(e){e=new Date(e.date).valueOf();return Date.now()-e<=2592e6}),[2,this._storage.overwrite(this._heartbeatsCache)])}})})},et.prototype.getHeartbeatsHeader=function(){var i;return h(this,void 0,void 0,function(){var t,n,r;return d(this,function(e){switch(e.label){case 0:return null!==this._heartbeatsCache?[3,2]:[4,this._heartbeatsCachePromise];case 1:e.sent(),e.label=2;case 2:return null==(null==(i=this._heartbeatsCache)?void 0:i.heartbeats)||0===this._heartbeatsCache.heartbeats.length?[2,""]:(t=tt(),n=function(e,n){void 0===n&&(n=1024);var t,r,i=[],o=e.slice();try{for(var a=p(e),s=a.next();!s.done&&"break"!==function(t){var e=i.find(function(e){return e.agent===t.agent});if(e){if(e.dates.push(t.date),it(i)>n)return e.dates.pop(),"break"}else if(i.push({agent:t.agent,dates:[t.date]}),it(i)>n)return i.pop(),"break";o=o.slice(1)}(s.value);s=a.next());}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return{heartbeatsToSend:i,unsentEntries:o}}(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,n=n.unsentEntries,r=z(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,0<n.length?(this._heartbeatsCache.heartbeats=n,[4,this._storage.overwrite(this._heartbeatsCache)]):[3,4]);case 3:return e.sent(),[3,5];case 4:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache),e.label=5;case 5:return[2,r]}})})};var Qe=et;function et(e){var t=this,e=(this.container=e,this._heartbeatsCache=null,this.container.getProvider("app").getImmediate());this._storage=new nt(e),this._heartbeatsCachePromise=this._storage.read().then(function(e){return t._heartbeatsCache=e})}function tt(){return(new Date).toISOString().substring(0,10)}rt.prototype.runIndexedDBEnvironmentCheck=function(){return h(this,void 0,void 0,function(){return d(this,function(e){return G()?[2,Y().then(function(){return!0}).catch(function(){return!1})]:[2,!1]})})},rt.prototype.read=function(){return h(this,void 0,void 0,function(){return d(this,function(e){switch(e.label){case 0:return[4,this._canUseIndexedDBPromise];case 1:return e.sent()?[3,2]:[2,{heartbeats:[]}];case 2:return[4,function(n){return h(this,void 0,void 0,function(){var t;return d(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),[4,Ye()];case 1:return[4,e.sent().transaction(Je).objectStore(Je).get(Ze(n))];case 2:return[2,e.sent()];case 3:return(t=e.sent())instanceof Z||(t=b.create("idb-get",{originalErrorMessage:null==t?void 0:t.message})),je.warn(t.message),[3,4];case 4:return[2]}})})}(this.app)];case 3:return[2,e.sent()||{heartbeats:[]}]}})})},rt.prototype.overwrite=function(n){var r;return h(this,void 0,void 0,function(){var t;return d(this,function(e){switch(e.label){case 0:return[4,this._canUseIndexedDBPromise];case 1:return e.sent()?[3,2]:[2];case 2:return[4,this.read()];case 3:return t=e.sent(),[2,Xe(this.app,{lastSentHeartbeatDate:null!=(r=n.lastSentHeartbeatDate)?r:t.lastSentHeartbeatDate,heartbeats:n.heartbeats})]}})})},rt.prototype.add=function(n){var r;return h(this,void 0,void 0,function(){var t;return d(this,function(e){switch(e.label){case 0:return[4,this._canUseIndexedDBPromise];case 1:return e.sent()?[3,2]:[2];case 2:return[4,this.read()];case 3:return t=e.sent(),[2,Xe(this.app,{lastSentHeartbeatDate:null!=(r=n.lastSentHeartbeatDate)?r:t.lastSentHeartbeatDate,heartbeats:a(a([],g(t.heartbeats),!1),g(n.heartbeats),!1)})]}})})};var nt=rt;function rt(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}function it(e){return z(JSON.stringify({version:2,heartbeats:e})).length}u(new o("platform-logger",function(e){return new Be(e)},"PRIVATE")),u(new o("heartbeat",function(e){return new Qe(e)},"PRIVATE")),_(i,"0.9.23",""),_(i,"0.9.23","esm5"),_("fire-js","");var ot=Object.freeze({__proto__:null,SDK_VERSION:"10.6.0",_DEFAULT_ENTRY_NAME:m,_addComponent:Ue,_addOrOverwriteComponent:Ve,_apps:v,_clearComponents:function(){xe.clear()},_components:xe,_getProvider:He,_registerComponent:u,_removeServiceInstance:function(e,t,n){void 0===n&&(n=m),He(e,t).clearInstance(n)},deleteApp:We,getApp:function(e){var t=v.get(e=void 0===e?m:e);if(!t&&e===m&&$())return qe();if(t)return t;throw b.create("no-app",{appName:e})},getApps:function(){return Array.from(v.values())},initializeApp:qe,onLog:$e,registerVersion:_,setLogLevel:Ke,FirebaseError:Z}),at=(Object.defineProperty(w.prototype,"automaticDataCollectionEnabled",{get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"options",{get:function(){return this._delegate.options},enumerable:!1,configurable:!0}),w.prototype.delete=function(){var t=this;return new Promise(function(e){t._delegate.checkDestroyed(),e()}).then(function(){return t.firebase.INTERNAL.removeApp(t.name),We(t._delegate)})},w.prototype._getService=function(e,t){void 0===t&&(t=m),this._delegate.checkDestroyed();var n,e=this._delegate.container.getProvider(e);return e.isInitialized()||"EXPLICIT"!==(null==(n=e.getComponent())?void 0:n.instantiationMode)||e.initialize(),e.getImmediate({identifier:t})},w.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=m),this._delegate.container.getProvider(e).clearInstance(t)},w.prototype._addComponent=function(e){Ue(this._delegate,e)},w.prototype._addOrOverwriteComponent=function(e){Ve(this._delegate,e)},w.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},w);function w(e,t){var n=this;this._delegate=e,this.firebase=t,Ue(e,new o("app-compat",function(){return n},"PUBLIC")),this.container=e.container}var st=new r("app-compat","Firebase",I=E={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});var E=function e(){i=at,n={},(o={__esModule:!0,initializeApp:function(e,t){e=qe(e,t=void 0===t?{}:t);if(ne(n,e.name))return n[e.name];t=new i(e,o);return n[e.name]=t},app:a,registerVersion:_,setLogLevel:Ke,onLog:$e,apps:null,SDK_VERSION:"10.6.0",INTERNAL:{registerComponent:function(n){var e,r=n.name,t=r.replace("-compat","");return u(n)&&"PUBLIC"===n.type&&(e=function(e){if("function"!=typeof(e=void 0===e?a():e)[t])throw st.create("invalid-app-argument",{appName:r});return e[t]()},void 0!==n.serviceProps&&q(e,n.serviceProps),o[t]=e,i.prototype[t]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._getService.bind(this,r).apply(this,n.multipleInstances?e:[])}),"PUBLIC"===n.type?o[t]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"!==t?t:null},modularAPIs:ot}}).default=o,Object.defineProperty(o,"apps",{get:function(){return Object.keys(n).map(function(e){return n[e]})}}),a.App=i;var i,n,o,t=o;function a(e){if(ne(n,e=e||m))return n[e];throw st.create("no-app",{appName:e})}return t.INTERNAL=f(f({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){q(t,e)},createSubscribe:oe,ErrorFactory:r,deepExtend:q}),t}(),I=new be("@firebase/app-compat"),i=("object"==typeof self&&self.self===self&&void 0!==self.firebase&&(I.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  "),(S=self.firebase.SDK_VERSION)&&0<=S.indexOf("LITE")&&I.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")),E),S=(_("@firebase/app-compat","0.2.23",void 0),i.registerVersion("firebase","10.6.0","app-compat"),"@firebase/installations"),I="0.6.4",ct=1e4,ut="w:".concat(I),lt="FIS_v2",ft="https://firebaseinstallations.googleapis.com/v1",pt=36e5,T=new r("installations","Installations",E=E={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ht(e){return e instanceof Z&&e.code.includes("request-failed")}function dt(e){e=e.projectId;return"".concat(ft,"/projects/").concat(e,"/installations")}function gt(e){return{token:e.token,requestStatus:2,expiresIn:(e=e.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()}}function mt(n,r){return h(this,void 0,void 0,function(){var t;return d(this,function(e){switch(e.label){case 0:return[4,r.json()];case 1:return t=e.sent().error,[2,T.create("request-failed",{requestName:n,serverCode:t.code,serverMessage:t.message,serverStatus:t.status})]}})})}function vt(e){e=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function bt(n){return h(this,void 0,void 0,function(){var t;return d(this,function(e){switch(e.label){case 0:return[4,n()];case 1:return 500<=(t=e.sent()).status&&t.status<600?[2,n()]:[2,t]}})})}function yt(t){return new Promise(function(e){setTimeout(e,t)})}var _t=/^[cdef][\w-]{21}$/,wt="";function Et(e){return"".concat(e.appName,"!").concat(e.appId)}var It=new Map;function St(e,t){var e=Et(e);Tt(e,t),e=e,t=t,!C&&"BroadcastChannel"in self&&((C=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){Tt(e.data.key,e.data.fid)}),C&&C.postMessage({key:e,fid:t}),0===It.size&&C&&(C.close(),C=null)}function Tt(e,t){var n,r,i=It.get(e);if(i)try{for(var o=p(i),a=o.next();!a.done;a=o.next())(0,a.value)(t)}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var C=null,A="firebase-installations-store",Ct=null;function At(){return Ct=Ct||Ne("firebase-installations-database",1,{upgrade:function(e,t){0===t&&e.createObjectStore(A)}})}function Ot(o,a){return h(this,void 0,void 0,function(){var t,n,r,i;return d(this,function(e){switch(e.label){case 0:return t=Et(o),[4,At()];case 1:return r=e.sent(),[4,(r=(n=r.transaction(A,"readwrite")).objectStore(A)).get(t)];case 2:return i=e.sent(),[4,r.put(a,t)];case 3:return e.sent(),[4,n.done];case 4:return e.sent(),i&&i.fid===a.fid||St(o,a.fid),[2,a]}})})}function Dt(r){return h(this,void 0,void 0,function(){var t,n;return d(this,function(e){switch(e.label){case 0:return t=Et(r),[4,At()];case 1:return[4,(n=(n=e.sent()).transaction(A,"readwrite")).objectStore(A).delete(t)];case 2:return e.sent(),[4,n.done];case 3:return e.sent(),[2]}})})}function Nt(a,s){return h(this,void 0,void 0,function(){var t,n,r,i,o;return d(this,function(e){switch(e.label){case 0:return t=Et(a),[4,At()];case 1:return r=e.sent(),[4,(r=(n=r.transaction(A,"readwrite")).objectStore(A)).get(t)];case 2:return i=e.sent(),void 0!==(o=s(i))?[3,4]:[4,r.delete(t)];case 3:return e.sent(),[3,6];case 4:return[4,r.put(o,t)];case 5:e.sent(),e.label=6;case 6:return[4,n.done];case 7:return e.sent(),!o||i&&i.fid===o.fid||St(a,o.fid),[2,o]}})})}function Pt(i){return h(this,void 0,void 0,function(){var t,n,r;return d(this,function(e){switch(e.label){case 0:return[4,Nt(i.appConfig,function(e){e=Mt(e||{fid:function(){try{var e=new Uint8Array(17),t=((self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16,btoa(String.fromCharCode.apply(String,a([],g(e),!1))).replace(/\+/g,"-").replace(/\//g,"_").substr(0,22));return _t.test(t)?t:wt}catch(e){return wt}}(),registrationStatus:0}),e=function(e,t){if(0!==t.registrationStatus)return 1===t.registrationStatus?{installationEntry:t,registrationPromise:function(i){return h(this,void 0,void 0,function(){var t,n,r;return d(this,function(e){switch(e.label){case 0:return[4,kt(i.appConfig)];case 1:t=e.sent(),e.label=2;case 2:return 1!==t.registrationStatus?[3,5]:[4,yt(100)];case 3:return e.sent(),[4,kt(i.appConfig)];case 4:return t=e.sent(),[3,2];case 5:return 0!==t.registrationStatus?[3,7]:[4,Pt(i)];case 6:return r=e.sent(),n=r.installationEntry,(r=r.registrationPromise)?[2,r]:[2,n];case 7:return[2,t]}})})}(e)}:{installationEntry:t};if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(T.create("app-offline"))};t={fid:t.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:t,registrationPromise:function(r,i){return h(this,void 0,void 0,function(){var t,n;return d(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,7]),[4,function(){var s=r.appConfig,c=r.heartbeatServiceProvider,u=i.fid;return h(this,void 0,void 0,function(){var t,n,r,i,o,a;return d(this,function(e){switch(e.label){case 0:return t=dt(s),n=vt(s),(r=c.getImmediate({optional:!0}))?[4,r.getHeartbeatsHeader()]:[3,2];case 1:(r=e.sent())&&n.append("x-firebase-client",r),e.label=2;case 2:return a={fid:u,authVersion:lt,appId:s.appId,sdkVersion:ut},i={method:"POST",headers:n,body:JSON.stringify(a)},[4,bt(function(){return fetch(t,i)})];case 3:return(o=e.sent()).ok?[4,o.json()]:[3,5];case 4:return[2,{fid:(a=e.sent()).fid||u,registrationStatus:2,refreshToken:a.refreshToken,authToken:gt(a.authToken)}];case 5:return[4,mt("Create Installation",o)];case 6:throw e.sent()}})})}()];case 1:return t=e.sent(),[2,Ot(r.appConfig,t)];case 2:return ht(n=e.sent())&&409===n.customData.serverCode?[4,Dt(r.appConfig)]:[3,4];case 3:return e.sent(),[3,6];case 4:return[4,Ot(r.appConfig,{fid:i.fid,registrationStatus:0})];case 5:e.sent(),e.label=6;case 6:throw n;case 7:return[2]}})})}(e,t)}}(i,e);return t=e.registrationPromise,e.installationEntry})];case 1:return(n=e.sent()).fid!==wt?[3,3]:(r={},[4,t]);case 2:return[2,(r.installationEntry=e.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:t}]}})})}function kt(e){return Nt(e,function(e){if(e)return Mt(e);throw T.create("installation-not-found")})}function Mt(e){return 1===e.registrationStatus&&e.registrationTime+ct<Date.now()?{fid:e.fid,registrationStatus:0}:e}function Lt(e,l){var f=e.appConfig,p=e.heartbeatServiceProvider;return h(this,void 0,void 0,function(){var i,o,a,s,c,u;return d(this,function(e){switch(e.label){case 0:return r=l.fid,i="".concat(dt(f),"/").concat(r,"/authTokens:generate"),r=f,t=(t=l).refreshToken,(n=vt(r)).append("Authorization",(r=t,"".concat(lt," ").concat(r))),o=n,(a=p.getImmediate({optional:!0}))?[4,a.getHeartbeatsHeader()]:[3,2];case 1:(a=e.sent())&&o.append("x-firebase-client",a),e.label=2;case 2:return u={installation:{sdkVersion:ut,appId:f.appId}},s={method:"POST",headers:o,body:JSON.stringify(u)},[4,bt(function(){return fetch(i,s)})];case 3:return(c=e.sent()).ok?[4,c.json()]:[3,5];case 4:return[2,gt(u=e.sent())];case 5:return[4,mt("Generate Auth Token",c)];case 6:throw e.sent()}var t,n,r})})}function Bt(a,s){return void 0===s&&(s=!1),h(this,void 0,void 0,function(){var o,t,n;return d(this,function(e){switch(e.label){case 0:return[4,Nt(a.appConfig,function(e){if(!jt(e))throw T.create("not-registered");var t,n,r,i=e.authToken;if(s||2!==(t=i).requestStatus||(n=t,(r=Date.now())<n.creationTime||n.creationTime+n.expiresIn<r+pt)){if(1===i.requestStatus)return o=function(r,i){return h(this,void 0,void 0,function(){var t,n;return d(this,function(e){switch(e.label){case 0:return[4,Rt(r.appConfig)];case 1:t=e.sent(),e.label=2;case 2:return 1!==t.authToken.requestStatus?[3,5]:[4,yt(100)];case 3:return e.sent(),[4,Rt(r.appConfig)];case 4:return t=e.sent(),[3,2];case 5:return 0===(n=t.authToken).requestStatus?[2,Bt(r,i)]:[2,n]}})})}(a,s),e;if(navigator.onLine)return t=e,i={requestStatus:1,requestTime:Date.now()},i=f(f({},t),{authToken:i}),o=function(i,o){return h(this,void 0,void 0,function(){var t,n,r;return d(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,8]),[4,Lt(i,o)];case 1:return t=e.sent(),r=f(f({},o),{authToken:t}),[4,Ot(i.appConfig,r)];case 2:return e.sent(),[2,t];case 3:return!ht(n=e.sent())||401!==n.customData.serverCode&&404!==n.customData.serverCode?[3,5]:[4,Dt(i.appConfig)];case 4:return e.sent(),[3,7];case 5:return r=f(f({},o),{authToken:{requestStatus:0}}),[4,Ot(i.appConfig,r)];case 6:e.sent(),e.label=7;case 7:throw n;case 8:return[2]}})})}(a,i),i;throw T.create("app-offline")}return e})];case 1:return t=e.sent(),o?[4,o]:[3,3];case 2:return n=e.sent(),[3,4];case 3:n=t.authToken,e.label=4;case 4:return[2,n]}})})}function Rt(e){return Nt(e,function(e){if(!jt(e))throw T.create("not-registered");var t=e.authToken;return 1===t.requestStatus&&t.requestTime+ct<Date.now()?f(f({},e),{authToken:{requestStatus:0}}):e})}function jt(e){return void 0!==e&&2===e.registrationStatus}function Ft(e){return T.create("missing-app-config-values",{valueName:e})}var xt="installations";u(new o(xt,function(e){e=e.getProvider("app").getImmediate();return{app:e,appConfig:function(e){var t,n;if(!e||!e.options)throw Ft("App Configuration");if(!e.name)throw Ft("App Name");try{for(var r=p(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!e.options[o])throw Ft(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(e),heartbeatServiceProvider:He(e,"heartbeat"),_delete:function(){return Promise.resolve()}}},"PUBLIC")),u(new o("installations-internal",function(e){var t=He(e.getProvider("app").getImmediate(),xt).getImmediate();return{getId:function(){return function(i){return h(this,void 0,void 0,function(){var t,n,r;return d(this,function(e){switch(e.label){case 0:return[4,Pt(t=i)];case 1:return n=e.sent(),r=n.installationEntry,(n.registrationPromise||Bt(t)).catch(console.error),[2,r.fid]}})})}(t)},getToken:function(e){return function(n,r){return void 0===r&&(r=!1),h(this,void 0,void 0,function(){var t;return d(this,function(e){switch(e.label){case 0:return[4,function(n){return h(this,void 0,void 0,function(){var t;return d(this,function(e){switch(e.label){case 0:return[4,Pt(n)];case 1:return(t=e.sent().registrationPromise)?[4,t]:[3,3];case 2:e.sent(),e.label=3;case 3:return[2]}})})}(t=n)];case 1:return e.sent(),[4,Bt(t,r)];case 2:return[2,e.sent().token]}})})}(t,e)}}},"PRIVATE")),_(S,I),_(S,I,"esm5");var Ut,Vt,E="@firebase/performance",Ht="0.6.4",zt=Ht,qt="FB-PERF-TRACE-MEASURE",Wt="@firebase/performance/config",$t="@firebase/performance/configexpire",O=new r("performance",S="Performance",I=I={"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."}),D=new be(S);D.logLevel=s.INFO;P.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},P.prototype.mark=function(e){this.performance&&this.performance.mark&&this.performance.mark(e)},P.prototype.measure=function(e,t,n){this.performance&&this.performance.measure&&this.performance.measure(e,t,n)},P.prototype.getEntriesByType=function(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]},P.prototype.getEntriesByName=function(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]},P.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},P.prototype.requiredApisAvailable=function(){return fetch&&Promise&&"undefined"!=typeof navigator&&navigator.cookieEnabled?!!G()||(D.info("IndexedDB is not supported by current browser"),!1):(D.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},P.prototype.setupObserver=function(e,i){this.PerformanceObserver&&new this.PerformanceObserver(function(e){for(var t=0,n=e.getEntries();t<n.length;t++){var r=n[t];i(r)}}).observe({entryTypes:[e]})},P.getInstance=function(){return Ut=void 0===Ut?new P(Vt):Ut};var Kt,Jt,N=P;function P(e){if(!(this.window=e))throw O.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}function Gt(e,t){var n=e.length-t.length;if(n<0||1<n)throw O.create("invalid String merger input");for(var r=[],i=0;i<e.length;i++)r.push(e.charAt(i)),t.length>i&&r.push(t.charAt(i));return r.join("")}Xt.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},Xt.getInstance=function(){return Jt=void 0===Jt?new Xt:Jt};var Yt,k=Xt;function Xt(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=Gt("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=Gt("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}Yt={UNKNOWN:0,0:"UNKNOWN",VISIBLE:1,1:"VISIBLE",HIDDEN:2,2:"HIDDEN"};var Zt=["firebase_","google_","ga_"],Qt=new RegExp("^[a-zA-Z]\\w*$");function en(){switch(N.getInstance().document.visibilityState){case"visible":return Yt.VISIBLE;case"hidden":return Yt.HIDDEN;default:return Yt.UNKNOWN}}function tn(e){e=null==(e=e.options)?void 0:e.appId;if(e)return e;throw O.create("no app id")}var nn="0.0.1",M={loggingEnabled:!0},rn="FIREBASE_INSTALLATIONS_AUTH";var on="Could not fetch config, will use default configs";function an(e){if(!e)return e;var t=k.getInstance(),n=e.entries||{};return void 0!==n.fpr_enabled?t.loggingEnabled="true"===String(n.fpr_enabled):t.loggingEnabled=M.loggingEnabled,n.fpr_log_source?t.logSource=Number(n.fpr_log_source):M.logSource&&(t.logSource=M.logSource),n.fpr_log_endpoint_url?t.logEndPointUrl=n.fpr_log_endpoint_url:M.logEndPointUrl&&(t.logEndPointUrl=M.logEndPointUrl),n.fpr_log_transport_key?t.transportKey=n.fpr_log_transport_key:M.transportKey&&(t.transportKey=M.transportKey),void 0!==n.fpr_vc_network_request_sampling_rate?t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate):void 0!==M.networkRequestsSamplingRate&&(t.networkRequestsSamplingRate=M.networkRequestsSamplingRate),void 0!==n.fpr_vc_trace_sampling_rate?t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate):void 0!==M.tracesSamplingRate&&(t.tracesSamplingRate=M.tracesSamplingRate),t.logTraceAfterSampling=sn(t.tracesSamplingRate),t.logNetworkAfterSampling=sn(t.networkRequestsSamplingRate),e}function sn(e){return Math.random()<=e}var cn,un=1;function ln(e){var o,n;return un=2,cn=cn||(o=e,n=N.getInstance().document,new Promise(function(e){var t;n&&"complete"!==n.readyState?(t=function(){"complete"===n.readyState&&(n.removeEventListener("readystatechange",t),e())},n.addEventListener("readystatechange",t)):e()}).then(function(){return(e=o.installations.getId()).then(function(e){Kt=e}),e;var e}).then(function(e){return t=o,e=e,(n=function(){var e=N.getInstance().localStorage;if(e){var t=e.getItem($t);if(t&&Number(t)>Date.now()&&(e=e.getItem(Wt)))try{return JSON.parse(e)}catch(e){return}}}())?(an(n),Promise.resolve()):(i=e,(n=(r=t).installations.getToken()).then(function(e){}),n.then(function(e){var t=function(){var e=null==(e=r.app.options)?void 0:e.projectId;if(e)return e;throw O.create("no project id")}(),n=function(){var e=null==(e=r.app.options)?void 0:e.apiKey;if(e)return e;throw O.create("no api key")}(),n="https://firebaseremoteconfig.googleapis.com/v1/projects/".concat(t,"/namespaces/fireperf:fetch?key=").concat(n),n=new Request(n,{method:"POST",headers:{Authorization:"".concat(rn," ").concat(e)},body:JSON.stringify({app_instance_id:i,app_instance_id_token:e,app_id:tn(r.app),app_version:zt,sdk_version:nn})});return fetch(n).then(function(e){if(e.ok)return e.json();throw O.create("RC response not ok")})}).catch(function(){D.info(on)}).then(an).then(function(e){var t=N.getInstance().localStorage;e&&t&&(t.setItem(Wt,JSON.stringify(e)),t.setItem($t,String(Date.now()+60*k.getInstance().configTimeToLive*60*1e3)))},function(){}));var t,r,i,n}).then(fn,fn))}function fn(){un=3}var pn,hn=3,L=[],dn=!1;function gn(e){setTimeout(function(){var e,t,r,n;if(0!==hn)return L.length?(t=(e=L.splice(0,1e3)).map(function(e){return{source_extension_json_proto3:e.message,event_time_ms:String(e.eventTime)}}),t={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:k.getInstance().logSource,log_event:t},r=e,t=t,n=k.getInstance().getFlTransportFullUrl(),void fetch(n,{method:"POST",body:JSON.stringify(t)}).then(function(e){return e.ok||D.info("Call to Firebase backend failed."),e.json()}).then(function(e){var t=Number(e.nextRequestWaitMillis),n=1e4;isNaN(t)||(n=Math.max(t,n)),t=e.logResponseDetails,Array.isArray(t)&&0<t.length&&"RETRY_REQUEST_LATER"===t[0].responseAction&&(L=a(a([],r,!0),L,!0),D.info("Retry transport request later.")),hn=3,gn(n)}).catch(function(){L=a(a([],e,!0),L,!0),hn--,D.info("Tries left: ".concat(hn,".")),gn(1e4)})):gn(1e4)},e)}function mn(r){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={message:r.apply(void 0,e),eventTime:Date.now()};if(!n.eventTime||!n.message)throw O.create("invalid cc log");L=a(a([],L,!0),[n],!1)}}function vn(e,t){(pn=pn||mn(_n))(e,t)}function bn(e){var t=k.getInstance();!t.instrumentationEnabled&&e.isAuto||!t.dataCollectionEnabled&&!e.isAuto||!N.getInstance().requiredApisAvailable()||e.isAuto&&en()!==Yt.VISIBLE||(3===un?yn(e):ln(e.performanceController).then(function(){return yn(e)},function(){return yn(e)}))}function yn(e){var t;Kt&&(t=k.getInstance()).loggingEnabled&&t.logTraceAfterSampling&&setTimeout(function(){return vn(e,1)},0)}function _n(e,t){return 0===t?(t={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},t={application_info:wn(e.performanceController.app),network_request_metric:t},JSON.stringify(t)):(e={name:(t=e).name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs},0!==Object.keys(t.counters).length&&(e.counters=t.counters),n=t.getAttributes(),0!==Object.keys(n).length&&(e.custom_attributes=n),e={application_info:wn(t.performanceController.app),trace_metric:e},JSON.stringify(e));var n}function wn(e){return{google_app_id:tn(e),app_instance_id:Kt,web_app_info:{sdk_version:zt,page_url:N.getInstance().getUrl(),service_worker_status:null!=(e=N.getInstance().navigator)&&e.serviceWorker?e.serviceWorker.controller?2:3:1,visibility_state:en(),effective_connection_type:function(){var e=N.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0}}var En=["_fp","_fcp","_fid"],In=(B.prototype.start=function(){if(1!==this.state)throw O.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},B.prototype.stop=function(){if(2!==this.state)throw O.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),bn(this)},B.prototype.record=function(e,t,n){if(e<=0)throw O.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw O.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),n&&n.attributes&&(this.customAttributes=f({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Math.floor(Number(n.metrics[o])))}bn(this)},B.prototype.incrementMetric=function(e,t){void 0===t&&(t=1),void 0===this.counters[e]?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)},B.prototype.putMetric=function(e,t){if(r=this.name,0===(n=e).length||100<n.length||!(r&&r.startsWith("_wt_")&&-1<En.indexOf(n))&&n.startsWith("_"))throw O.create("invalid custom metric name",{customMetricName:e});var n,r;this.counters[e]=(t=null!=t?t:0,(r=Math.floor(t))<t&&D.info("Metric value should be an Integer, setting the value as : ".concat(r,".")),r)},B.prototype.getMetric=function(e){return this.counters[e]||0},B.prototype.putAttribute=function(e,t){var n,r=!(0===(n=e).length||40<n.length||Zt.some(function(e){return n.startsWith(e)})||!n.match(Qt)),i=0!==t.length&&t.length<=100;if(r&&i)this.customAttributes[e]=t;else{if(!r)throw O.create("invalid attribute name",{attributeName:e});if(!i)throw O.create("invalid attribute value",{attributeValue:t})}},B.prototype.getAttribute=function(e){return this.customAttributes[e]},B.prototype.removeAttribute=function(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]},B.prototype.getAttributes=function(){return f({},this.customAttributes)},B.prototype.setStartTime=function(e){this.startTimeUs=e},B.prototype.setDuration=function(e){this.durationUs=e},B.prototype.calculateTraceMetrics=function(){var e=this.api.getEntriesByName(this.traceMeasure);(e=e&&e[0])&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},B.createOobTrace=function(e,t,n,r){var i=N.getInstance().getUrl();i&&(e=new B(e,"_wt_"+i,!0),i=Math.floor(1e3*N.getInstance().getTimeOrigin()),e.setStartTime(i),t&&t[0]&&(e.setDuration(Math.floor(1e3*t[0].duration)),e.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),e.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),e.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),n&&((i=n.find(function(e){return"first-paint"===e.name}))&&i.startTime&&e.putMetric("_fp",Math.floor(1e3*i.startTime)),(i=n.find(function(e){return"first-contentful-paint"===e.name}))&&i.startTime&&e.putMetric("_fcp",Math.floor(1e3*i.startTime)),r&&e.putMetric("_fid",Math.floor(1e3*r))),bn(e))},B.createUserTimingTrace=function(e,t){bn(new B(e,t,!1,t))},B);function B(e,t,n,r){void 0===n&&(n=!1),this.performanceController=e,this.name=t,this.isAuto=n,this.state=1,this.customAttributes={},this.counters={},this.api=N.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="".concat("FB-PERF-TRACE-START","-").concat(this.randomId,"-").concat(this.name),this.traceStopMark="".concat("FB-PERF-TRACE-STOP","-").concat(this.randomId,"-").concat(this.name),this.traceMeasure=r||"".concat(qt,"-").concat(this.randomId,"-").concat(this.name),r&&this.calculateTraceMetrics())}function Sn(e,t){var n,r,i,o;t&&void 0!==t.responseStart&&(i=N.getInstance().getTimeOrigin(),o=Math.floor(1e3*(t.startTime+i)),r=t.responseStart?Math.floor(1e3*(t.responseStart-t.startTime)):void 0,i=Math.floor(1e3*(t.responseEnd-t.startTime)),t={performanceController:e,url:t.name&&t.name.split("?")[0],responsePayloadBytes:t.transferSize,startTimeUs:o,timeToResponseInitiatedUs:r,timeToResponseCompletedUs:i},n=t,(o=k.getInstance()).instrumentationEnabled&&(r=n.url,i=o.logEndPointUrl.split("?")[0],t=o.flTransportEndpointUrl.split("?")[0],r!==i&&r!==t&&o.loggingEnabled&&o.logNetworkAfterSampling&&setTimeout(function(){return vn(n,0)},0)))}function Tn(o){Kt&&(setTimeout(function(){var t,n,e,r,i;t=o,e=N.getInstance(),r=e.getEntriesByType("navigation"),i=e.getEntriesByType("paint"),e.onFirstInputDelay?(n=setTimeout(function(){In.createOobTrace(t,r,i),n=void 0},5e3),e.onFirstInputDelay(function(e){n&&(clearTimeout(n),In.createOobTrace(t,r,i,e))})):In.createOobTrace(t,r,i)},0),setTimeout(function(){for(var t=o,e=N.getInstance(),n=0,r=e.getEntriesByType("resource");n<r.length;n++){var i=r[n];Sn(t,i)}e.setupObserver("resource",function(e){return Sn(t,e)})},0),setTimeout(function(){for(var t=o,e=N.getInstance(),n=0,r=e.getEntriesByType("measure");n<r.length;n++){var i=r[n];Cn(t,i)}e.setupObserver("measure",function(e){return Cn(t,e)})},0))}function Cn(e,t){t=t.name;t.substring(0,qt.length)!==qt&&In.createUserTimingTrace(e,t)}On.prototype._init=function(e){var t=this;this.initialized||(void 0!==(null==e?void 0:e.dataCollectionEnabled)&&(this.dataCollectionEnabled=e.dataCollectionEnabled),void 0!==(null==e?void 0:e.instrumentationEnabled)&&(this.instrumentationEnabled=e.instrumentationEnabled),N.getInstance().requiredApisAvailable()?Y().then(function(e){e&&(dn||(gn(5500),dn=!0),ln(t).then(function(){return Tn(t)},function(){return Tn(t)}),t.initialized=!0)}).catch(function(e){D.info("Environment doesn't support IndexedDB: ".concat(e))}):D.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))},Object.defineProperty(On.prototype,"instrumentationEnabled",{get:function(){return k.getInstance().instrumentationEnabled},set:function(e){k.getInstance().instrumentationEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(On.prototype,"dataCollectionEnabled",{get:function(){return k.getInstance().dataCollectionEnabled},set:function(e){k.getInstance().dataCollectionEnabled=e},enumerable:!1,configurable:!0});var An=On;function On(e,t){this.app=e,this.installations=t,this.initialized=!1}u(new o("performance",function(e,t){var t=t.options,n=e.getProvider("app").getImmediate(),e=e.getProvider("installations-internal").getImmediate();if("[DEFAULT]"!==n.name)throw O.create("FB not default");if("undefined"==typeof window)throw O.create("no window");return Vt=window,(e=new An(n,e))._init(t),e},"PUBLIC")),_(E,Ht),_(E,Ht,"esm5"),Object.defineProperty(Nn.prototype,"instrumentationEnabled",{get:function(){return this._delegate.instrumentationEnabled},set:function(e){this._delegate.instrumentationEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(Nn.prototype,"dataCollectionEnabled",{get:function(){return this._delegate.dataCollectionEnabled},set:function(e){this._delegate.dataCollectionEnabled=e},enumerable:!1,configurable:!0}),Nn.prototype.trace=function(e){return t=(t=this._delegate)&&t._delegate?t._delegate:t,new In(t,e);var t};var Dn=Nn;function Nn(e,t){this.app=e,this._delegate=t}return(I=i).INTERNAL.registerComponent(new o("performance-compat",function(e){var t=e.getProvider("app-compat").getImmediate(),e=e.getProvider("performance").getImmediate();return new Dn(t,e)},"PUBLIC")),I.registerVersion("@firebase/performance-compat","0.2.4"),i.registerVersion("firebase","10.6.0","compat-lite"),i});